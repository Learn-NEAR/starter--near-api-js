/**
 * Minified by jsDelivr using Terser v5.14.1.
 * Original file: /npm/@near-wallet-selector/ledger@5.0.3/index.umd.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
 !function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("is-mobile"),require("near-api-js/lib/utils/errors"),require("@near-wallet-selector/wallet-utils"),require("@near-wallet-selector/core"),require("@ledgerhq/hw-transport-webhid"),require("near-api-js")):"function"==typeof define&&define.amd?define(["exports","is-mobile","near-api-js/lib/utils/errors","@near-wallet-selector/wallet-utils","@near-wallet-selector/core","@ledgerhq/hw-transport-webhid","near-api-js"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Ledger={},t.isMobile,t.errors,t.walletUtils,t.core,t.TransportWebHID,t.nearApiJs)}(this,(function(t,e,n,r,o,i,c){"use strict";function u(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=u(i);
 /*! *****************************************************************************
		 Copyright (c) Microsoft Corporation.
 
		 Permission to use, copy, modify, and/or distribute this software for any
		 purpose with or without fee is hereby granted.
 
		 THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		 REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		 AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		 INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		 LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		 OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		 PERFORMANCE OF THIS SOFTWARE.
		 ***************************************************************************** */function s(t,e,n,r){return new(n||(n=Promise))((function(o,i){function c(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,u)}a((r=r.apply(t,e||[])).next())}))}var l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},f=function(t){return t&&t.Math==Math&&t},d=f("object"==typeof globalThis&&globalThis)||f("object"==typeof window&&window)||f("object"==typeof self&&self)||f("object"==typeof l&&l)||function(){return this}()||Function("return this")(),p={},v=function(t){try{return!!t()}catch(t){return!0}},h=!v((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),y=!v((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),g=y,b=Function.prototype.call,m=g?b.bind(b):function(){return b.apply(b,arguments)},w={},x={}.propertyIsEnumerable,S=Object.getOwnPropertyDescriptor,O=S&&!x.call({1:2},1);w.f=O?function(t){var e=S(this,t);return!!e&&e.enumerable}:x;var I,E,T=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},P=y,j=Function.prototype,A=j.bind,R=j.call,L=P&&A.bind(R,R),_=P?function(t){return t&&L(t)}:function(t){return t&&function(){return R.apply(t,arguments)}},M=_,k=M({}.toString),C=M("".slice),K=function(t){return C(k(t),8,-1)},F=_,D=v,N=K,G=d.Object,B=F("".split),W=D((function(){return!G("z").propertyIsEnumerable(0)}))?function(t){return"String"==N(t)?B(t,""):G(t)}:G,U=d.TypeError,q=function(t){if(null==t)throw U("Can't call method on "+t);return t},V=W,z=q,$=function(t){return V(z(t))},Y=function(t){return"function"==typeof t},H=Y,X=function(t){return"object"==typeof t?null!==t:H(t)},J=d,Q=Y,Z=function(t){return Q(t)?t:void 0},tt=function(t,e){return arguments.length<2?Z(J[t]):J[t]&&J[t][e]},et=_({}.isPrototypeOf),nt=d,rt=tt("navigator","userAgent")||"",ot=nt.process,it=nt.Deno,ct=ot&&ot.versions||it&&it.version,ut=ct&&ct.v8;ut&&(E=(I=ut.split("."))[0]>0&&I[0]<4?1:+(I[0]+I[1])),!E&&rt&&(!(I=rt.match(/Edge\/(\d+)/))||I[1]>=74)&&(I=rt.match(/Chrome\/(\d+)/))&&(E=+I[1]);var at=E,st=v,lt=!!Object.getOwnPropertySymbols&&!st((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&at&&at<41})),ft=lt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,dt=tt,pt=Y,vt=et,ht=ft,yt=d.Object,gt=ht?function(t){return"symbol"==typeof t}:function(t){var e=dt("Symbol");return pt(e)&&vt(e.prototype,yt(t))},bt=d.String,mt=function(t){try{return bt(t)}catch(t){return"Object"}},wt=Y,xt=mt,St=d.TypeError,Ot=function(t){if(wt(t))return t;throw St(xt(t)+" is not a function")},It=function(t,e){var n=t[e];return null==n?void 0:Ot(n)},Et=m,Tt=Y,Pt=X,jt=d.TypeError,At={exports:{}},Rt=d,Lt=Object.defineProperty,_t=function(t,e){try{Lt(Rt,t,{value:e,configurable:!0,writable:!0})}catch(n){Rt[t]=e}return e},Mt=_t,kt="__core-js_shared__",Ct=d[kt]||Mt(kt,{}),Kt=Ct;(At.exports=function(t,e){return Kt[t]||(Kt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.21.1",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Ft=q,Dt=d.Object,Nt=function(t){return Dt(Ft(t))},Gt=Nt,Bt=_({}.hasOwnProperty),Wt=Object.hasOwn||function(t,e){return Bt(Gt(t),e)},Ut=_,qt=0,Vt=Math.random(),zt=Ut(1..toString),$t=function(t){return"Symbol("+(void 0===t?"":t)+")_"+zt(++qt+Vt,36)},Yt=d,Ht=At.exports,Xt=Wt,Jt=$t,Qt=lt,Zt=ft,te=Ht("wks"),ee=Yt.Symbol,ne=ee&&ee.for,re=Zt?ee:ee&&ee.withoutSetter||Jt,oe=function(t){if(!Xt(te,t)||!Qt&&"string"!=typeof te[t]){var e="Symbol."+t;Qt&&Xt(ee,t)?te[t]=ee[t]:te[t]=Zt&&ne?ne(e):re(e)}return te[t]},ie=m,ce=X,ue=gt,ae=It,se=function(t,e){var n,r;if("string"===e&&Tt(n=t.toString)&&!Pt(r=Et(n,t)))return r;if(Tt(n=t.valueOf)&&!Pt(r=Et(n,t)))return r;if("string"!==e&&Tt(n=t.toString)&&!Pt(r=Et(n,t)))return r;throw jt("Can't convert object to primitive value")},le=oe,fe=d.TypeError,de=le("toPrimitive"),pe=function(t,e){if(!ce(t)||ue(t))return t;var n,r=ae(t,de);if(r){if(void 0===e&&(e="default"),n=ie(r,t,e),!ce(n)||ue(n))return n;throw fe("Can't convert object to primitive value")}return void 0===e&&(e="number"),se(t,e)},ve=gt,he=function(t){var e=pe(t,"string");return ve(e)?e:e+""},ye=X,ge=d.document,be=ye(ge)&&ye(ge.createElement),me=function(t){return be?ge.createElement(t):{}},we=me,xe=!h&&!v((function(){return 7!=Object.defineProperty(we("div"),"a",{get:function(){return 7}}).a})),Se=h,Oe=m,Ie=w,Ee=T,Te=$,Pe=he,je=Wt,Ae=xe,Re=Object.getOwnPropertyDescriptor;p.f=Se?Re:function(t,e){if(t=Te(t),e=Pe(e),Ae)try{return Re(t,e)}catch(t){}if(je(t,e))return Ee(!Oe(Ie.f,t,e),t[e])};var Le={},_e=h&&v((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Me=d,ke=X,Ce=Me.String,Ke=Me.TypeError,Fe=function(t){if(ke(t))return t;throw Ke(Ce(t)+" is not an object")},De=h,Ne=xe,Ge=_e,Be=Fe,We=he,Ue=d.TypeError,qe=Object.defineProperty,Ve=Object.getOwnPropertyDescriptor,ze="enumerable",$e="configurable",Ye="writable";Le.f=De?Ge?function(t,e,n){if(Be(t),e=We(e),Be(n),"function"==typeof t&&"prototype"===e&&"value"in n&&Ye in n&&!n.writable){var r=Ve(t,e);r&&r.writable&&(t[e]=n.value,n={configurable:$e in n?n.configurable:r.configurable,enumerable:ze in n?n.enumerable:r.enumerable,writable:!1})}return qe(t,e,n)}:qe:function(t,e,n){if(Be(t),e=We(e),Be(n),Ne)try{return qe(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Ue("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var He=Le,Xe=T,Je=h?function(t,e,n){return He.f(t,e,Xe(1,n))}:function(t,e,n){return t[e]=n,t},Qe={exports:{}},Ze=Y,tn=Ct,en=_(Function.toString);Ze(tn.inspectSource)||(tn.inspectSource=function(t){return en(t)});var nn,rn,on,cn=tn.inspectSource,un=Y,an=cn,sn=d.WeakMap,ln=un(sn)&&/native code/.test(an(sn)),fn=At.exports,dn=$t,pn=fn("keys"),vn=function(t){return pn[t]||(pn[t]=dn(t))},hn={},yn=ln,gn=d,bn=_,mn=X,wn=Je,xn=Wt,Sn=Ct,On=vn,In=hn,En="Object already initialized",Tn=gn.TypeError,Pn=gn.WeakMap;if(yn||Sn.state){var jn=Sn.state||(Sn.state=new Pn),An=bn(jn.get),Rn=bn(jn.has),Ln=bn(jn.set);nn=function(t,e){if(Rn(jn,t))throw new Tn(En);return e.facade=t,Ln(jn,t,e),e},rn=function(t){return An(jn,t)||{}},on=function(t){return Rn(jn,t)}}else{var _n=On("state");In[_n]=!0,nn=function(t,e){if(xn(t,_n))throw new Tn(En);return e.facade=t,wn(t,_n,e),e},rn=function(t){return xn(t,_n)?t[_n]:{}},on=function(t){return xn(t,_n)}}var Mn={set:nn,get:rn,has:on,enforce:function(t){return on(t)?rn(t):nn(t,{})},getterFor:function(t){return function(e){var n;if(!mn(e)||(n=rn(e)).type!==t)throw Tn("Incompatible receiver, "+t+" required");return n}}},kn=h,Cn=Wt,Kn=Function.prototype,Fn=kn&&Object.getOwnPropertyDescriptor,Dn=Cn(Kn,"name"),Nn={EXISTS:Dn,PROPER:Dn&&"something"===function(){}.name,CONFIGURABLE:Dn&&(!kn||kn&&Fn(Kn,"name").configurable)},Gn=d,Bn=Y,Wn=Wt,Un=Je,qn=_t,Vn=cn,zn=Nn.CONFIGURABLE,$n=Mn.get,Yn=Mn.enforce,Hn=String(String).split("String");(Qe.exports=function(t,e,n,r){var o,i=!!r&&!!r.unsafe,c=!!r&&!!r.enumerable,u=!!r&&!!r.noTargetGet,a=r&&void 0!==r.name?r.name:e;Bn(n)&&("Symbol("===String(a).slice(0,7)&&(a="["+String(a).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Wn(n,"name")||zn&&n.name!==a)&&Un(n,"name",a),(o=Yn(n)).source||(o.source=Hn.join("string"==typeof a?a:""))),t!==Gn?(i?!u&&t[e]&&(c=!0):delete t[e],c?t[e]=n:Un(t,e,n)):c?t[e]=n:qn(e,n)})(Function.prototype,"toString",(function(){return Bn(this)&&$n(this).source||Vn(this)}));var Xn={},Jn=Math.ceil,Qn=Math.floor,Zn=function(t){var e=+t;return e!=e||0===e?0:(e>0?Qn:Jn)(e)},tr=Zn,er=Math.max,nr=Math.min,rr=function(t,e){var n=tr(t);return n<0?er(n+e,0):nr(n,e)},or=Zn,ir=Math.min,cr=function(t){return t>0?ir(or(t),9007199254740991):0},ur=cr,ar=function(t){return ur(t.length)},sr=$,lr=rr,fr=ar,dr=function(t){return function(e,n,r){var o,i=sr(e),c=fr(i),u=lr(r,c);if(t&&n!=n){for(;c>u;)if((o=i[u++])!=o)return!0}else for(;c>u;u++)if((t||u in i)&&i[u]===n)return t||u||0;return!t&&-1}},pr={includes:dr(!0),indexOf:dr(!1)},vr=Wt,hr=$,yr=pr.indexOf,gr=hn,br=_([].push),mr=function(t,e){var n,r=hr(t),o=0,i=[];for(n in r)!vr(gr,n)&&vr(r,n)&&br(i,n);for(;e.length>o;)vr(r,n=e[o++])&&(~yr(i,n)||br(i,n));return i},wr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],xr=mr,Sr=wr.concat("length","prototype");Xn.f=Object.getOwnPropertyNames||function(t){return xr(t,Sr)};var Or={};Or.f=Object.getOwnPropertySymbols;var Ir=tt,Er=Xn,Tr=Or,Pr=Fe,jr=_([].concat),Ar=Ir("Reflect","ownKeys")||function(t){var e=Er.f(Pr(t)),n=Tr.f;return n?jr(e,n(t)):e},Rr=Wt,Lr=Ar,_r=p,Mr=Le,kr=v,Cr=Y,Kr=/#|\.prototype\./,Fr=function(t,e){var n=Nr[Dr(t)];return n==Br||n!=Gr&&(Cr(e)?kr(e):!!e)},Dr=Fr.normalize=function(t){return String(t).replace(Kr,".").toLowerCase()},Nr=Fr.data={},Gr=Fr.NATIVE="N",Br=Fr.POLYFILL="P",Wr=Fr,Ur=d,qr=p.f,Vr=Je,zr=Qe.exports,$r=_t,Yr=function(t,e,n){for(var r=Lr(e),o=Mr.f,i=_r.f,c=0;c<r.length;c++){var u=r[c];Rr(t,u)||n&&Rr(n,u)||o(t,u,i(e,u))}},Hr=Wr,Xr=function(t,e){var n,r,o,i,c,u=t.target,a=t.global,s=t.stat;if(n=a?Ur:s?Ur[u]||$r(u,{}):(Ur[u]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(c=qr(n,r))&&c.value:n[r],!Hr(a?r:u+(s?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;Yr(i,o)}(t.sham||o&&o.sham)&&Vr(i,"sham",!0),zr(n,r,i,t)}},Jr={};Jr[oe("toStringTag")]="z";var Qr=d,Zr="[object z]"===String(Jr),to=Y,eo=K,no=oe("toStringTag"),ro=Qr.Object,oo="Arguments"==eo(function(){return arguments}()),io=Zr?eo:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=ro(t),no))?n:oo?eo(e):"Object"==(r=eo(e))&&to(e.callee)?"Arguments":r},co=io,uo=d.String,ao=function(t){if("Symbol"===co(t))throw TypeError("Cannot convert a Symbol value to a string");return uo(t)},so=Fe,lo=v,fo=d.RegExp,po=lo((function(){var t=fo("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),vo=po||lo((function(){return!fo("a","y").sticky})),ho={BROKEN_CARET:po||lo((function(){var t=fo("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:vo,UNSUPPORTED_Y:po},yo={},go=mr,bo=wr,mo=Object.keys||function(t){return go(t,bo)},wo=h,xo=_e,So=Le,Oo=Fe,Io=$,Eo=mo;yo.f=wo&&!xo?Object.defineProperties:function(t,e){Oo(t);for(var n,r=Io(e),o=Eo(e),i=o.length,c=0;i>c;)So.f(t,n=o[c++],r[n]);return t};var To,Po=tt("document","documentElement"),jo=Fe,Ao=yo,Ro=wr,Lo=hn,_o=Po,Mo=me,ko=vn("IE_PROTO"),Co=function(){},Ko=function(t){return"<script>"+t+"</"+"script>"},Fo=function(t){t.write(Ko("")),t.close();var e=t.parentWindow.Object;return t=null,e},Do=function(){try{To=new ActiveXObject("htmlfile")}catch(t){}var t,e;Do="undefined"!=typeof document?document.domain&&To?Fo(To):((e=Mo("iframe")).style.display="none",_o.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Ko("document.F=Object")),t.close(),t.F):Fo(To);for(var n=Ro.length;n--;)delete Do.prototype[Ro[n]];return Do()};Lo[ko]=!0;var No,Go,Bo=Object.create||function(t,e){var n;return null!==t?(Co.prototype=jo(t),n=new Co,Co.prototype=null,n[ko]=t):n=Do(),void 0===e?n:Ao.f(n,e)},Wo=v,Uo=d.RegExp,qo=Wo((function(){var t=Uo(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),Vo=v,zo=d.RegExp,$o=Vo((function(){var t=zo("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),Yo=m,Ho=_,Xo=ao,Jo=function(){var t=so(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Qo=ho,Zo=At.exports,ti=Bo,ei=Mn.get,ni=qo,ri=$o,oi=Zo("native-string-replace",String.prototype.replace),ii=RegExp.prototype.exec,ci=ii,ui=Ho("".charAt),ai=Ho("".indexOf),si=Ho("".replace),li=Ho("".slice),fi=(Go=/b*/g,Yo(ii,No=/a/,"a"),Yo(ii,Go,"a"),0!==No.lastIndex||0!==Go.lastIndex),di=Qo.BROKEN_CARET,pi=void 0!==/()??/.exec("")[1];(fi||pi||di||ni||ri)&&(ci=function(t){var e,n,r,o,i,c,u,a=this,s=ei(a),l=Xo(t),f=s.raw;if(f)return f.lastIndex=a.lastIndex,e=Yo(ci,f,l),a.lastIndex=f.lastIndex,e;var d=s.groups,p=di&&a.sticky,v=Yo(Jo,a),h=a.source,y=0,g=l;if(p&&(v=si(v,"y",""),-1===ai(v,"g")&&(v+="g"),g=li(l,a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==ui(l,a.lastIndex-1))&&(h="(?: "+h+")",g=" "+g,y++),n=new RegExp("^(?:"+h+")",v)),pi&&(n=new RegExp("^"+h+"$(?!\\s)",v)),fi&&(r=a.lastIndex),o=Yo(ii,p?n:a,g),p?o?(o.input=li(o.input,y),o[0]=li(o[0],y),o.index=a.lastIndex,a.lastIndex+=o[0].length):a.lastIndex=0:fi&&o&&(a.lastIndex=a.global?o.index+o[0].length:r),pi&&o&&o.length>1&&Yo(oi,o[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&d)for(o.groups=c=ti(null),i=0;i<d.length;i++)c[(u=d[i])[0]]=o[u[1]];return o});var vi=ci;Xr({target:"RegExp",proto:!0,forced:/./.exec!==vi},{exec:vi});var hi=y,yi=Function.prototype,gi=yi.apply,bi=yi.call,mi="object"==typeof Reflect&&Reflect.apply||(hi?bi.bind(gi):function(){return bi.apply(gi,arguments)}),wi=_,xi=Qe.exports,Si=vi,Oi=v,Ii=oe,Ei=Je,Ti=Ii("species"),Pi=RegExp.prototype,ji=X,Ai=K,Ri=oe("match"),Li=function(t){var e;return ji(t)&&(void 0!==(e=t[Ri])?!!e:"RegExp"==Ai(t))},_i=_,Mi=v,ki=Y,Ci=io,Ki=cn,Fi=function(){},Di=[],Ni=tt("Reflect","construct"),Gi=/^\s*(?:class|function)\b/,Bi=_i(Gi.exec),Wi=!Gi.exec(Fi),Ui=function(t){if(!ki(t))return!1;try{return Ni(Fi,Di,t),!0}catch(t){return!1}},qi=function(t){if(!ki(t))return!1;switch(Ci(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Wi||!!Bi(Gi,Ki(t))}catch(t){return!0}};qi.sham=!0;var Vi=!Ni||Mi((function(){var t;return Ui(Ui.call)||!Ui(Object)||!Ui((function(){t=!0}))||t}))?qi:Ui,zi=mt,$i=d.TypeError,Yi=Fe,Hi=function(t){if(Vi(t))return t;throw $i(zi(t)+" is not a constructor")},Xi=oe("species"),Ji=_,Qi=Zn,Zi=ao,tc=q,ec=Ji("".charAt),nc=Ji("".charCodeAt),rc=Ji("".slice),oc=function(t){return function(e,n){var r,o,i=Zi(tc(e)),c=Qi(n),u=i.length;return c<0||c>=u?t?"":void 0:(r=nc(i,c))<55296||r>56319||c+1===u||(o=nc(i,c+1))<56320||o>57343?t?ec(i,c):r:t?rc(i,c,c+2):o-56320+(r-55296<<10)+65536}},ic={codeAt:oc(!1),charAt:oc(!0)}.charAt,cc=he,uc=Le,ac=T,sc=rr,lc=ar,fc=function(t,e,n){var r=cc(e);r in t?uc.f(t,r,ac(0,n)):t[r]=n},dc=d.Array,pc=Math.max,vc=m,hc=Fe,yc=Y,gc=K,bc=vi,mc=d.TypeError,wc=mi,xc=m,Sc=_,Oc=function(t,e,n,r){var o=Ii(t),i=!Oi((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),c=i&&!Oi((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Ti]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return e=!0,null},n[o](""),!e}));if(!i||!c||n){var u=wi(/./[o]),a=e(o,""[t],(function(t,e,n,r,o){var c=wi(t),a=e.exec;return a===Si||a===Pi.exec?i&&!o?{done:!0,value:u(e,n,r)}:{done:!0,value:c(n,e,r)}:{done:!1}}));xi(String.prototype,t,a[0]),xi(Pi,o,a[1])}r&&Ei(Pi[o],"sham",!0)},Ic=Li,Ec=Fe,Tc=q,Pc=function(t,e){var n,r=Yi(t).constructor;return void 0===r||null==(n=Yi(r)[Xi])?e:Hi(n)},jc=function(t,e,n){return e+(n?ic(t,e).length:1)},Ac=cr,Rc=ao,Lc=It,_c=function(t,e,n){for(var r=lc(t),o=sc(e,r),i=sc(void 0===n?r:n,r),c=dc(pc(i-o,0)),u=0;o<i;o++,u++)fc(c,u,t[o]);return c.length=u,c},Mc=function(t,e){var n=t.exec;if(yc(n)){var r=vc(n,t,e);return null!==r&&hc(r),r}if("RegExp"===gc(t))return vc(bc,t,e);throw mc("RegExp#exec called on incompatible receiver")},kc=vi,Cc=v,Kc=ho.UNSUPPORTED_Y,Fc=4294967295,Dc=Math.min,Nc=[].push,Gc=Sc(/./.exec),Bc=Sc(Nc),Wc=Sc("".slice),Uc=!Cc((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));Oc("split",(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=Rc(Tc(this)),o=void 0===n?Fc:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!Ic(t))return xc(e,r,t,o);for(var i,c,u,a=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,f=new RegExp(t.source,s+"g");(i=xc(kc,f,r))&&!((c=f.lastIndex)>l&&(Bc(a,Wc(r,l,i.index)),i.length>1&&i.index<r.length&&wc(Nc,a,_c(i,1)),u=i[0].length,l=c,a.length>=o));)f.lastIndex===i.index&&f.lastIndex++;return l===r.length?!u&&Gc(f,"")||Bc(a,""):Bc(a,Wc(r,l)),a.length>o?_c(a,0,o):a}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:xc(e,this,t,n)}:e,[function(e,n){var o=Tc(this),i=null==e?void 0:Lc(e,t);return i?xc(i,e,o,n):xc(r,Rc(o),e,n)},function(t,o){var i=Ec(this),c=Rc(t),u=n(r,i,c,o,r!==e);if(u.done)return u.value;var a=Pc(i,RegExp),s=i.unicode,l=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(Kc?"g":"y"),f=new a(Kc?"^(?:"+i.source+")":i,l),d=void 0===o?Fc:o>>>0;if(0===d)return[];if(0===c.length)return null===Mc(f,c)?[c]:[];for(var p=0,v=0,h=[];v<c.length;){f.lastIndex=Kc?0:v;var y,g=Mc(f,Kc?Wc(c,v):c);if(null===g||(y=Dc(Ac(f.lastIndex+(Kc?v:0)),c.length))===p)v=jc(c,v,s);else{if(Bc(h,Wc(c,p,v)),h.length===d)return h;for(var b=1;b<=g.length-1;b++)if(Bc(h,g[b]),h.length===d)return h;v=p=y}}return Bc(h,Wc(c,p)),h}]}),!Uc,Kc);var qc,Vc=Li,zc=d.TypeError,$c=oe("match"),Yc=Xr,Hc=_,Xc=p.f,Jc=cr,Qc=ao,Zc=function(t){if(Vc(t))throw zc("The method doesn't accept regular expressions");return t},tu=q,eu=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[$c]=!1,"/./"[t](e)}catch(t){}}return!1},nu=Hc("".endsWith),ru=Hc("".slice),ou=Math.min,iu=eu("endsWith");Yc({target:"String",proto:!0,forced:!!(iu||(qc=Xc(String.prototype,"endsWith"),!qc||qc.writable))&&!iu},{endsWith:function(t){var e=Qc(tu(this));Zc(t);var n=arguments.length>1?arguments[1]:void 0,r=e.length,o=void 0===n?r:ou(Jc(n),r),i=Qc(t);return nu?nu(e,i,o):ru(e,o-i.length,o)===i}});var cu="\t\n\v\f\r  áââââââââââââ¯âã\u2028\u2029\ufeff",uu=q,au=ao,su=_("".replace),lu="[\t\n\v\f\r  áââââââââââââ¯âã\u2028\u2029\ufeff]",fu=RegExp("^"+lu+lu+"*"),du=RegExp(lu+lu+"*$"),pu=function(t){return function(e){var n=au(uu(e));return 1&t&&(n=su(n,fu,"")),2&t&&(n=su(n,du,"")),n}},vu={start:pu(1),end:pu(2),trim:pu(3)},hu=d,yu=v,gu=_,bu=ao,mu=vu.trim,wu=cu,xu=hu.parseInt,Su=hu.Symbol,Ou=Su&&Su.iterator,Iu=/^[+-]?0x/i,Eu=gu(Iu.exec),Tu=8!==xu(wu+"08")||22!==xu(wu+"0x16")||Ou&&!yu((function(){xu(Object(Ou))}))?function(t,e){var n=mu(bu(t));return xu(n,e>>>0||(Eu(Iu,n)?16:10))}:xu;Xr({global:!0,forced:parseInt!=Tu},{parseInt:Tu});var Pu=Bo,ju=Le,Au=oe("unscopables"),Ru=Array.prototype;null==Ru[Au]&&ju.f(Ru,Au,{configurable:!0,value:Pu(null)});var Lu,_u,Mu,ku={},Cu=!v((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Ku=d,Fu=Wt,Du=Y,Nu=Nt,Gu=Cu,Bu=vn("IE_PROTO"),Wu=Ku.Object,Uu=Wu.prototype,qu=Gu?Wu.getPrototypeOf:function(t){var e=Nu(t);if(Fu(e,Bu))return e[Bu];var n=e.constructor;return Du(n)&&e instanceof n?n.prototype:e instanceof Wu?Uu:null},Vu=v,zu=Y,$u=qu,Yu=Qe.exports,Hu=oe("iterator"),Xu=!1;[].keys&&("next"in(Mu=[].keys())?(_u=$u($u(Mu)))!==Object.prototype&&(Lu=_u):Xu=!0);var Ju=null==Lu||Vu((function(){var t={};return Lu[Hu].call(t)!==t}));Ju&&(Lu={}),zu(Lu[Hu])||Yu(Lu,Hu,(function(){return this}));var Qu={IteratorPrototype:Lu,BUGGY_SAFARI_ITERATORS:Xu},Zu=Le.f,ta=Wt,ea=oe("toStringTag"),na=function(t,e,n){t&&!n&&(t=t.prototype),t&&!ta(t,ea)&&Zu(t,ea,{configurable:!0,value:e})},ra=Qu.IteratorPrototype,oa=Bo,ia=T,ca=na,ua=ku,aa=function(){return this},sa=d,la=Y,fa=sa.String,da=sa.TypeError,pa=_,va=Fe,ha=function(t){if("object"==typeof t||la(t))return t;throw da("Can't set "+fa(t)+" as a prototype")},ya=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=pa(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return va(n),ha(r),e?t(n,r):n.__proto__=r,n}}():void 0),ga=Xr,ba=m,ma=Nn,wa=Y,xa=function(t,e,n,r){var o=e+" Iterator";return t.prototype=oa(ra,{next:ia(+!r,n)}),ca(t,o,!1),ua[o]=aa,t},Sa=qu,Oa=ya,Ia=na,Ea=Je,Ta=Qe.exports,Pa=ku,ja=ma.PROPER,Aa=ma.CONFIGURABLE,Ra=Qu.IteratorPrototype,La=Qu.BUGGY_SAFARI_ITERATORS,_a=oe("iterator"),Ma="keys",ka="values",Ca="entries",Ka=function(){return this},Fa=$,Da=function(t){Ru[Au][t]=!0},Na=ku,Ga=Mn,Ba=Le.f,Wa=function(t,e,n,r,o,i,c){xa(n,e,r);var u,a,s,l=function(t){if(t===o&&h)return h;if(!La&&t in p)return p[t];switch(t){case Ma:case ka:case Ca:return function(){return new n(this,t)}}return function(){return new n(this)}},f=e+" Iterator",d=!1,p=t.prototype,v=p[_a]||p["@@iterator"]||o&&p[o],h=!La&&v||l(o),y="Array"==e&&p.entries||v;if(y&&(u=Sa(y.call(new t)))!==Object.prototype&&u.next&&(Sa(u)!==Ra&&(Oa?Oa(u,Ra):wa(u[_a])||Ta(u,_a,Ka)),Ia(u,f,!0)),ja&&o==ka&&v&&v.name!==ka&&(Aa?Ea(p,"name",ka):(d=!0,h=function(){return ba(v,this)})),o)if(a={values:l(ka),keys:i?h:l(Ma),entries:l(Ca)},c)for(s in a)(La||d||!(s in p))&&Ta(p,s,a[s]);else ga({target:e,proto:!0,forced:La||d},a);return p[_a]!==h&&Ta(p,_a,h,{name:o}),Pa[e]=h,a},Ua=h,qa="Array Iterator",Va=Ga.set,za=Ga.getterFor(qa),$a=Wa(Array,"Array",(function(t,e){Va(this,{type:qa,target:Fa(t),index:0,kind:e})}),(function(){var t=za(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),Ya=Na.Arguments=Na.Array;if(Da("keys"),Da("values"),Da("entries"),Ua&&"values"!==Ya.name)try{Ba(Ya,"name",{value:"values"})}catch(t){}var Ha=me("span").classList,Xa=Ha&&Ha.constructor&&Ha.constructor.prototype,Ja=Xa===Object.prototype?void 0:Xa,Qa=d,Za={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},ts=Ja,es=$a,ns=Je,rs=oe,os=rs("iterator"),is=rs("toStringTag"),cs=es.values,us=function(t,e){if(t){if(t[os]!==cs)try{ns(t,os,cs)}catch(e){t[os]=cs}if(t[is]||ns(t,is,e),Za[e])for(var n in es)if(t[n]!==es[n])try{ns(t,n,es[n])}catch(e){t[n]=es[n]}}};for(var as in Za)us(Qa[as]&&Qa[as].prototype,as);us(ts,"DOMTokenList");function ss(t){const e=t.split("/");return Buffer.concat(e.map((t=>t.endsWith("'")?2147483648|Math.abs(parseInt(t.slice(0,-1))):Math.abs(parseInt(t)))).map((t=>Buffer.from([t>>24&255,t>>16&255,t>>8&255,255&t]))))}const ls="W".charCodeAt(0);class fs{constructor(){this.transport=null,this.isConnected=()=>Boolean(this.transport),this.connect=()=>s(this,void 0,void 0,(function*(){this.transport=yield a.default.create();const t=()=>{var e;null===(e=this.transport)||void 0===e||e.off("disconnect",t),this.transport=null};this.transport.on("disconnect",t)})),this.disconnect=()=>s(this,void 0,void 0,(function*(){if(!this.transport)throw new Error("Device not connected");yield this.transport.close(),this.transport=null})),this.setScrambleKey=t=>{if(!this.transport)throw new Error("Device not connected");this.transport.setScrambleKey(t)},this.on=(t,e)=>{if(!this.transport)throw new Error("Device not connected");return this.transport.on(t,e),{remove:()=>{var n;return null===(n=this.transport)||void 0===n?void 0:n.off(t,e)}}},this.off=(t,e)=>{if(!this.transport)throw new Error("Device not connected");this.transport.off(t,e)},this.getVersion=()=>s(this,void 0,void 0,(function*(){if(!this.transport)throw new Error("Device not connected");const t=yield this.transport.send(128,6,0,0),[e,n,r]=Array.from(t);return`${e}.${n}.${r}`})),this.getPublicKey=({derivationPath:t})=>s(this,void 0,void 0,(function*(){if(!this.transport)throw new Error("Device not connected");const e=yield this.transport.send(128,4,0,ls,ss(t));return c.utils.serialize.base_encode(e.subarray(0,-2))})),this.sign=({data:t,derivationPath:e})=>s(this,void 0,void 0,(function*(){if(!this.transport)throw new Error("Device not connected");yield this.getVersion();const n=Buffer.concat([ss(e),Buffer.from(t)]);for(let t=0;t<n.length;t+=123){const e=t+123>=n.length,r=yield this.transport.send(128,2,e?128:0,0,Buffer.from(n.subarray(t,t+123)));if(e)return Buffer.from(r.subarray(0,-2))}throw new Error("Invalid data or derivation path")}))}}const ds="accounts",ps=({options:t,store:e,provider:i,logger:u,storage:a})=>s(void 0,void 0,void 0,(function*(){const l=yield(t=>s(void 0,void 0,void 0,(function*(){const e=yield t.getItem(ds);return{client:new fs,subscriptions:[],accounts:e||[]}})))(a),f={createKey:()=>{throw new Error("Not implemented")},getPublicKey:t=>s(void 0,void 0,void 0,(function*(){const e=l.accounts.find((e=>e.accountId===t));if(!e)throw new Error("Failed to find public key for account");return c.utils.PublicKey.from(e.publicKey)})),signMessage:(t,e)=>s(void 0,void 0,void 0,(function*(){const n=l.accounts.find((t=>t.accountId===e));if(!n)throw new Error("Failed to find account for signing");return{signature:yield l.client.sign({data:t,derivationPath:n.derivationPath}),publicKey:c.utils.PublicKey.from(n.publicKey)}}))},d=()=>l.accounts.map((t=>({accountId:t.accountId}))),p=()=>s(void 0,void 0,void 0,(function*(){l.client.isConnected()||(yield l.client.connect())})),v=({accountId:t,publicKey:e})=>(u.log("validateAccessKey",{accountId:t,publicKey:e}),i.viewAccessKey({accountId:t,publicKey:e}).then((t=>{if(u.log("validateAccessKey:accessKey",{accessKey:t}),"FullAccess"!==t.permission)throw new Error("Public key requires 'FullAccess' permission");return t}),(t=>{if(t instanceof n.TypedError&&"AccessKeyDoesNotExist"===t.type)return null;throw t}))),h=t=>{const{contract:n}=e.getState();if(!n)throw new Error("Wallet not signed in");const r=o.getActiveAccount(e.getState());if(!r)throw new Error("No active account");return t.map((t=>({signerId:t.signerId||r.accountId,receiverId:t.receiverId||n.contractId,actions:t.actions})))};return{signIn({accounts:t}){return s(this,void 0,void 0,(function*(){const e=d();if(e.length)return e;const n=[];for(let e=0;e<t.length;e++){const{derivationPath:r,accountId:o,publicKey:i}=t[e];if(!(yield v({accountId:o,publicKey:i})))throw new Error(`Public key is not registered with the account '${o}'.`);n.push({accountId:o,derivationPath:r,publicKey:i})}return yield a.setItem(ds,n),l.accounts=n,d()}))},signOut:()=>s(void 0,void 0,void 0,(function*(){l.client.isConnected()&&(yield l.client.disconnect().catch((t=>{u.log("Failed to disconnect device"),u.error(t)}))),l.subscriptions.forEach((t=>t.remove())),l.subscriptions=[],l.accounts=[],a.removeItem(ds)})),getAccounts(){return s(this,void 0,void 0,(function*(){return d()}))},signAndSendTransaction({signerId:e,receiverId:n,actions:o}){return s(this,void 0,void 0,(function*(){if(u.log("signAndSendTransaction",{signerId:e,receiverId:n,actions:o}),!l.accounts.length)throw new Error("Wallet not signed in");yield p();const c=yield r.signTransactions(h([{signerId:e,receiverId:n,actions:o}]),f,t.network);return i.sendTransaction(c[0])}))},signAndSendTransactions({transactions:e}){return s(this,void 0,void 0,(function*(){if(u.log("signAndSendTransactions",{transactions:e}),!l.accounts.length)throw new Error("Wallet not signed in");yield p();const n=yield r.signTransactions(h(e),f,t.network),o=[];for(let t=0;t<n.length;t++)o.push(yield i.sendTransaction(n[t]));return o}))},getPublicKey(t){return s(this,void 0,void 0,(function*(){return yield p(),yield l.client.getPublicKey({derivationPath:t})}))}}}));t.setupLedger=function({iconUrl:t="./assets/ledger-icon.png"}={}){return()=>s(this,void 0,void 0,(function*(){const n=e.isMobile(),r=!!(null===(o=window.navigator)||void 0===o?void 0:o.hid);var o;return n||!r?null:{id:"ledger",type:"hardware",metadata:{name:"Ledger",description:null,iconUrl:t,deprecated:!1,available:r},init:ps}}))},Object.defineProperty(t,"__esModule",{value:!0})}));