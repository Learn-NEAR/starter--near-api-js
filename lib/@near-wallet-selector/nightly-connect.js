/**
 * Minified by jsDelivr using Terser v5.14.1.
 * Original file: /npm/@near-wallet-selector/nightly-connect@5.0.3/index.umd.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
 !function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("near-api-js"),require("@nightlylabs/connect"),require("@near-wallet-selector/core"),require("@near-wallet-selector/wallet-utils")):"function"==typeof define&&define.amd?define(["exports","near-api-js","@nightlylabs/connect","@near-wallet-selector/core","@near-wallet-selector/wallet-utils"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).NightlyConnect={},t.nearApiJs,t.connect,t.core,t.walletUtils)}(this,(function(t,e,n,r,o){"use strict";var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},c=function(t){return t&&t.Math==Math&&t},u=c("object"==typeof globalThis&&globalThis)||c("object"==typeof window&&window)||c("object"==typeof self&&self)||c("object"==typeof i&&i)||function(){return this}()||Function("return this")(),a={},s=function(t){try{return!!t()}catch(t){return!0}},f=!s((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),l=!s((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),p=l,d=Function.prototype.call,v=p?d.bind(d):function(){return d.apply(d,arguments)},h={},y={}.propertyIsEnumerable,g=Object.getOwnPropertyDescriptor,b=g&&!y.call({1:2},1);h.f=b?function(t){var e=g(this,t);return!!e&&e.enumerable}:y;var m,w,O=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},j=l,S=Function.prototype,T=S.bind,E=S.call,P=j&&T.bind(E,E),I=j?function(t){return t&&P(t)}:function(t){return t&&function(){return E.apply(t,arguments)}},x=I,A=x({}.toString),L=x("".slice),M=function(t){return L(A(t),8,-1)},R=I,k=s,C=M,F=u.Object,_=R("".split),N=k((function(){return!F("z").propertyIsEnumerable(0)}))?function(t){return"String"==C(t)?_(t,""):F(t)}:F,G=u.TypeError,D=function(t){if(null==t)throw G("Can't call method on "+t);return t},U=N,K=D,W=function(t){return U(K(t))},q=function(t){return"function"==typeof t},z=q,B=function(t){return"object"==typeof t?null!==t:z(t)},V=u,H=q,Y=function(t){return H(t)?t:void 0},X=function(t,e){return arguments.length<2?Y(V[t]):V[t]&&V[t][e]},J=I({}.isPrototypeOf),$=X("navigator","userAgent")||"",Q=u,Z=$,tt=Q.process,et=Q.Deno,nt=tt&&tt.versions||et&&et.version,rt=nt&&nt.v8;rt&&(w=(m=rt.split("."))[0]>0&&m[0]<4?1:+(m[0]+m[1])),!w&&Z&&(!(m=Z.match(/Edge\/(\d+)/))||m[1]>=74)&&(m=Z.match(/Chrome\/(\d+)/))&&(w=+m[1]);var ot=w,it=ot,ct=s,ut=!!Object.getOwnPropertySymbols&&!ct((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&it&&it<41})),at=ut&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,st=X,ft=q,lt=J,pt=at,dt=u.Object,vt=pt?function(t){return"symbol"==typeof t}:function(t){var e=st("Symbol");return ft(e)&&lt(e.prototype,dt(t))},ht=u.String,yt=function(t){try{return ht(t)}catch(t){return"Object"}},gt=q,bt=yt,mt=u.TypeError,wt=function(t){if(gt(t))return t;throw mt(bt(t)+" is not a function")},Ot=wt,jt=function(t,e){var n=t[e];return null==n?void 0:Ot(n)},St=v,Tt=q,Et=B,Pt=u.TypeError,It={exports:{}},xt=u,At=Object.defineProperty,Lt=function(t,e){try{At(xt,t,{value:e,configurable:!0,writable:!0})}catch(n){xt[t]=e}return e},Mt=Lt,Rt="__core-js_shared__",kt=u[Rt]||Mt(Rt,{}),Ct=kt;(It.exports=function(t,e){return Ct[t]||(Ct[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.21.1",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Ft=D,_t=u.Object,Nt=function(t){return _t(Ft(t))},Gt=Nt,Dt=I({}.hasOwnProperty),Ut=Object.hasOwn||function(t,e){return Dt(Gt(t),e)},Kt=I,Wt=0,qt=Math.random(),zt=Kt(1..toString),Bt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+zt(++Wt+qt,36)},Vt=u,Ht=It.exports,Yt=Ut,Xt=Bt,Jt=ut,$t=at,Qt=Ht("wks"),Zt=Vt.Symbol,te=Zt&&Zt.for,ee=$t?Zt:Zt&&Zt.withoutSetter||Xt,ne=function(t){if(!Yt(Qt,t)||!Jt&&"string"!=typeof Qt[t]){var e="Symbol."+t;Jt&&Yt(Zt,t)?Qt[t]=Zt[t]:Qt[t]=$t&&te?te(e):ee(e)}return Qt[t]},re=v,oe=B,ie=vt,ce=jt,ue=function(t,e){var n,r;if("string"===e&&Tt(n=t.toString)&&!Et(r=St(n,t)))return r;if(Tt(n=t.valueOf)&&!Et(r=St(n,t)))return r;if("string"!==e&&Tt(n=t.toString)&&!Et(r=St(n,t)))return r;throw Pt("Can't convert object to primitive value")},ae=ne,se=u.TypeError,fe=ae("toPrimitive"),le=function(t,e){if(!oe(t)||ie(t))return t;var n,r=ce(t,fe);if(r){if(void 0===e&&(e="default"),n=re(r,t,e),!oe(n)||ie(n))return n;throw se("Can't convert object to primitive value")}return void 0===e&&(e="number"),ue(t,e)},pe=vt,de=function(t){var e=le(t,"string");return pe(e)?e:e+""},ve=B,he=u.document,ye=ve(he)&&ve(he.createElement),ge=function(t){return ye?he.createElement(t):{}},be=ge,me=!f&&!s((function(){return 7!=Object.defineProperty(be("div"),"a",{get:function(){return 7}}).a})),we=f,Oe=v,je=h,Se=O,Te=W,Ee=de,Pe=Ut,Ie=me,xe=Object.getOwnPropertyDescriptor;a.f=we?xe:function(t,e){if(t=Te(t),e=Ee(e),Ie)try{return xe(t,e)}catch(t){}if(Pe(t,e))return Se(!Oe(je.f,t,e),t[e])};var Ae={},Le=f&&s((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Me=u,Re=B,ke=Me.String,Ce=Me.TypeError,Fe=function(t){if(Re(t))return t;throw Ce(ke(t)+" is not an object")},_e=f,Ne=me,Ge=Le,De=Fe,Ue=de,Ke=u.TypeError,We=Object.defineProperty,qe=Object.getOwnPropertyDescriptor,ze="enumerable",Be="configurable",Ve="writable";Ae.f=_e?Ge?function(t,e,n){if(De(t),e=Ue(e),De(n),"function"==typeof t&&"prototype"===e&&"value"in n&&Ve in n&&!n.writable){var r=qe(t,e);r&&r.writable&&(t[e]=n.value,n={configurable:Be in n?n.configurable:r.configurable,enumerable:ze in n?n.enumerable:r.enumerable,writable:!1})}return We(t,e,n)}:We:function(t,e,n){if(De(t),e=Ue(e),De(n),Ne)try{return We(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Ke("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var He=Ae,Ye=O,Xe=f?function(t,e,n){return He.f(t,e,Ye(1,n))}:function(t,e,n){return t[e]=n,t},Je={exports:{}},$e=q,Qe=kt,Ze=I(Function.toString);$e(Qe.inspectSource)||(Qe.inspectSource=function(t){return Ze(t)});var tn,en,nn,rn=Qe.inspectSource,on=q,cn=rn,un=u.WeakMap,an=on(un)&&/native code/.test(cn(un)),sn=It.exports,fn=Bt,ln=sn("keys"),pn=function(t){return ln[t]||(ln[t]=fn(t))},dn={},vn=an,hn=u,yn=I,gn=B,bn=Xe,mn=Ut,wn=kt,On=pn,jn=dn,Sn="Object already initialized",Tn=hn.TypeError,En=hn.WeakMap;if(vn||wn.state){var Pn=wn.state||(wn.state=new En),In=yn(Pn.get),xn=yn(Pn.has),An=yn(Pn.set);tn=function(t,e){if(xn(Pn,t))throw new Tn(Sn);return e.facade=t,An(Pn,t,e),e},en=function(t){return In(Pn,t)||{}},nn=function(t){return xn(Pn,t)}}else{var Ln=On("state");jn[Ln]=!0,tn=function(t,e){if(mn(t,Ln))throw new Tn(Sn);return e.facade=t,bn(t,Ln,e),e},en=function(t){return mn(t,Ln)?t[Ln]:{}},nn=function(t){return mn(t,Ln)}}var Mn={set:tn,get:en,has:nn,enforce:function(t){return nn(t)?en(t):tn(t,{})},getterFor:function(t){return function(e){var n;if(!gn(e)||(n=en(e)).type!==t)throw Tn("Incompatible receiver, "+t+" required");return n}}},Rn=f,kn=Ut,Cn=Function.prototype,Fn=Rn&&Object.getOwnPropertyDescriptor,_n=kn(Cn,"name"),Nn={EXISTS:_n,PROPER:_n&&"something"===function(){}.name,CONFIGURABLE:_n&&(!Rn||Rn&&Fn(Cn,"name").configurable)},Gn=u,Dn=q,Un=Ut,Kn=Xe,Wn=Lt,qn=rn,zn=Nn.CONFIGURABLE,Bn=Mn.get,Vn=Mn.enforce,Hn=String(String).split("String");(Je.exports=function(t,e,n,r){var o,i=!!r&&!!r.unsafe,c=!!r&&!!r.enumerable,u=!!r&&!!r.noTargetGet,a=r&&void 0!==r.name?r.name:e;Dn(n)&&("Symbol("===String(a).slice(0,7)&&(a="["+String(a).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Un(n,"name")||zn&&n.name!==a)&&Kn(n,"name",a),(o=Vn(n)).source||(o.source=Hn.join("string"==typeof a?a:""))),t!==Gn?(i?!u&&t[e]&&(c=!0):delete t[e],c?t[e]=n:Kn(t,e,n)):c?t[e]=n:Wn(e,n)})(Function.prototype,"toString",(function(){return Dn(this)&&Bn(this).source||qn(this)}));var Yn={},Xn=Math.ceil,Jn=Math.floor,$n=function(t){var e=+t;return e!=e||0===e?0:(e>0?Jn:Xn)(e)},Qn=$n,Zn=Math.max,tr=Math.min,er=$n,nr=Math.min,rr=function(t){return t>0?nr(er(t),9007199254740991):0},or=function(t){return rr(t.length)},ir=W,cr=function(t,e){var n=Qn(t);return n<0?Zn(n+e,0):tr(n,e)},ur=or,ar=function(t){return function(e,n,r){var o,i=ir(e),c=ur(i),u=cr(r,c);if(t&&n!=n){for(;c>u;)if((o=i[u++])!=o)return!0}else for(;c>u;u++)if((t||u in i)&&i[u]===n)return t||u||0;return!t&&-1}},sr={includes:ar(!0),indexOf:ar(!1)},fr=Ut,lr=W,pr=sr.indexOf,dr=dn,vr=I([].push),hr=function(t,e){var n,r=lr(t),o=0,i=[];for(n in r)!fr(dr,n)&&fr(r,n)&&vr(i,n);for(;e.length>o;)fr(r,n=e[o++])&&(~pr(i,n)||vr(i,n));return i},yr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],gr=hr,br=yr.concat("length","prototype");Yn.f=Object.getOwnPropertyNames||function(t){return gr(t,br)};var mr={};mr.f=Object.getOwnPropertySymbols;var wr=X,Or=Yn,jr=mr,Sr=Fe,Tr=I([].concat),Er=wr("Reflect","ownKeys")||function(t){var e=Or.f(Sr(t)),n=jr.f;return n?Tr(e,n(t)):e},Pr=Ut,Ir=Er,xr=a,Ar=Ae,Lr=s,Mr=q,Rr=/#|\.prototype\./,kr=function(t,e){var n=Fr[Cr(t)];return n==Nr||n!=_r&&(Mr(e)?Lr(e):!!e)},Cr=kr.normalize=function(t){return String(t).replace(Rr,".").toLowerCase()},Fr=kr.data={},_r=kr.NATIVE="N",Nr=kr.POLYFILL="P",Gr=kr,Dr=u,Ur=a.f,Kr=Xe,Wr=Je.exports,qr=Lt,zr=function(t,e,n){for(var r=Ir(e),o=Ar.f,i=xr.f,c=0;c<r.length;c++){var u=r[c];Pr(t,u)||n&&Pr(n,u)||o(t,u,i(e,u))}},Br=Gr,Vr=function(t,e){var n,r,o,i,c,u=t.target,a=t.global,s=t.stat;if(n=a?Dr:s?Dr[u]||qr(u,{}):(Dr[u]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(c=Ur(n,r))&&c.value:n[r],!Br(a?r:u+(s?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;zr(i,o)}(t.sham||o&&o.sham)&&Kr(i,"sham",!0),Wr(n,r,i,t)}},Hr=u.Promise,Yr=Je.exports,Xr=u,Jr=q,$r=Xr.String,Qr=Xr.TypeError,Zr=I,to=Fe,eo=function(t){if("object"==typeof t||Jr(t))return t;throw Qr("Can't set "+$r(t)+" as a prototype")},no=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Zr(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return to(n),eo(r),e?t(n,r):n.__proto__=r,n}}():void 0),ro=Ae.f,oo=Ut,io=ne("toStringTag"),co=function(t,e,n){t&&!n&&(t=t.prototype),t&&!oo(t,io)&&ro(t,io,{configurable:!0,value:e})},uo=X,ao=Ae,so=f,fo=ne("species"),lo=J,po=u.TypeError,vo=wt,ho=l,yo=I(I.bind),go=function(t,e){return vo(t),void 0===e?t:ho?yo(t,e):function(){return t.apply(e,arguments)}},bo={},mo=bo,wo=ne("iterator"),Oo=Array.prototype,jo={};jo[ne("toStringTag")]="z";var So=u,To="[object z]"===String(jo),Eo=q,Po=M,Io=ne("toStringTag"),xo=So.Object,Ao="Arguments"==Po(function(){return arguments}()),Lo=To?Po:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=xo(t),Io))?n:Ao?Po(e):"Object"==(r=Po(e))&&Eo(e.callee)?"Arguments":r},Mo=Lo,Ro=jt,ko=bo,Co=ne("iterator"),Fo=function(t){if(null!=t)return Ro(t,Co)||Ro(t,"@@iterator")||ko[Mo(t)]},_o=v,No=wt,Go=Fe,Do=yt,Uo=Fo,Ko=u.TypeError,Wo=v,qo=Fe,zo=jt,Bo=go,Vo=v,Ho=Fe,Yo=yt,Xo=function(t){return void 0!==t&&(mo.Array===t||Oo[wo]===t)},Jo=or,$o=J,Qo=function(t,e){var n=arguments.length<2?Uo(t):e;if(No(n))return Go(_o(n,t));throw Ko(Do(t)+" is not iterable")},Zo=Fo,ti=function(t,e,n){var r,o;qo(t);try{if(!(r=zo(t,"return"))){if("throw"===e)throw n;return n}r=Wo(r,t)}catch(t){o=!0,r=t}if("throw"===e)throw n;if(o)throw r;return qo(r),n},ei=u.TypeError,ni=function(t,e){this.stopped=t,this.result=e},ri=ni.prototype,oi=ne("iterator"),ii=!1;try{var ci=0,ui={next:function(){return{done:!!ci++}},return:function(){ii=!0}};ui[oi]=function(){return this},Array.from(ui,(function(){throw 2}))}catch(t){}var ai=I,si=s,fi=q,li=Lo,pi=rn,di=function(){},vi=[],hi=X("Reflect","construct"),yi=/^\s*(?:class|function)\b/,gi=ai(yi.exec),bi=!yi.exec(di),mi=function(t){if(!fi(t))return!1;try{return hi(di,vi,t),!0}catch(t){return!1}},wi=function(t){if(!fi(t))return!1;switch(li(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return bi||!!gi(yi,pi(t))}catch(t){return!0}};wi.sham=!0;var Oi,ji,Si,Ti,Ei=!hi||si((function(){var t;return mi(mi.call)||!mi(Object)||!mi((function(){t=!0}))||t}))?wi:mi,Pi=Ei,Ii=yt,xi=u.TypeError,Ai=Fe,Li=function(t){if(Pi(t))return t;throw xi(Ii(t)+" is not a constructor")},Mi=ne("species"),Ri=l,ki=Function.prototype,Ci=ki.apply,Fi=ki.call,_i="object"==typeof Reflect&&Reflect.apply||(Ri?Fi.bind(Ci):function(){return Fi.apply(Ci,arguments)}),Ni=X("document","documentElement"),Gi=I([].slice),Di=u.TypeError,Ui=/(?:ipad|iphone|ipod).*applewebkit/i.test($),Ki="process"==M(u.process),Wi=u,qi=_i,zi=go,Bi=q,Vi=Ut,Hi=s,Yi=Ni,Xi=Gi,Ji=ge,$i=function(t,e){if(t<e)throw Di("Not enough arguments");return t},Qi=Ui,Zi=Ki,tc=Wi.setImmediate,ec=Wi.clearImmediate,nc=Wi.process,rc=Wi.Dispatch,oc=Wi.Function,ic=Wi.MessageChannel,cc=Wi.String,uc=0,ac={},sc="onreadystatechange";try{Oi=Wi.location}catch(t){}var fc=function(t){if(Vi(ac,t)){var e=ac[t];delete ac[t],e()}},lc=function(t){return function(){fc(t)}},pc=function(t){fc(t.data)},dc=function(t){Wi.postMessage(cc(t),Oi.protocol+"//"+Oi.host)};tc&&ec||(tc=function(t){$i(arguments.length,1);var e=Bi(t)?t:oc(t),n=Xi(arguments,1);return ac[++uc]=function(){qi(e,void 0,n)},ji(uc),uc},ec=function(t){delete ac[t]},Zi?ji=function(t){nc.nextTick(lc(t))}:rc&&rc.now?ji=function(t){rc.now(lc(t))}:ic&&!Qi?(Ti=(Si=new ic).port2,Si.port1.onmessage=pc,ji=zi(Ti.postMessage,Ti)):Wi.addEventListener&&Bi(Wi.postMessage)&&!Wi.importScripts&&Oi&&"file:"!==Oi.protocol&&!Hi(dc)?(ji=dc,Wi.addEventListener("message",pc,!1)):ji=sc in Ji("script")?function(t){Yi.appendChild(Ji("script")).onreadystatechange=function(){Yi.removeChild(this),fc(t)}}:function(t){setTimeout(lc(t),0)});var vc,hc,yc,gc,bc,mc,wc,Oc,jc={set:tc,clear:ec},Sc=u,Tc=/ipad|iphone|ipod/i.test($)&&void 0!==Sc.Pebble,Ec=/web0s(?!.*chrome)/i.test($),Pc=u,Ic=go,xc=a.f,Ac=jc.set,Lc=Ui,Mc=Tc,Rc=Ec,kc=Ki,Cc=Pc.MutationObserver||Pc.WebKitMutationObserver,Fc=Pc.document,_c=Pc.process,Nc=Pc.Promise,Gc=xc(Pc,"queueMicrotask"),Dc=Gc&&Gc.value;Dc||(vc=function(){var t,e;for(kc&&(t=_c.domain)&&t.exit();hc;){e=hc.fn,hc=hc.next;try{e()}catch(t){throw hc?gc():yc=void 0,t}}yc=void 0,t&&t.enter()},Lc||kc||Rc||!Cc||!Fc?!Mc&&Nc&&Nc.resolve?((wc=Nc.resolve(void 0)).constructor=Nc,Oc=Ic(wc.then,wc),gc=function(){Oc(vc)}):kc?gc=function(){_c.nextTick(vc)}:(Ac=Ic(Ac,Pc),gc=function(){Ac(vc)}):(bc=!0,mc=Fc.createTextNode(""),new Cc(vc).observe(mc,{characterData:!0}),gc=function(){mc.data=bc=!bc}));var Uc=Dc||function(t){var e={fn:t,next:void 0};yc&&(yc.next=e),hc||(hc=e,gc()),yc=e},Kc={},Wc=wt,qc=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=Wc(e),this.reject=Wc(n)};Kc.f=function(t){return new qc(t)};var zc=Fe,Bc=B,Vc=Kc,Hc=u,Yc=function(){this.head=null,this.tail=null};Yc.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}};var Xc,Jc,$c,Qc,Zc=Yc,tu="object"==typeof window,eu=Vr,nu=u,ru=X,ou=v,iu=Hr,cu=Je.exports,uu=function(t,e,n){for(var r in e)Yr(t,r,e[r],n);return t},au=no,su=co,fu=function(t){var e=uo(t),n=ao.f;so&&e&&!e[fo]&&n(e,fo,{configurable:!0,get:function(){return this}})},lu=wt,pu=q,du=B,vu=function(t,e){if(lo(e,t))return t;throw po("Incorrect invocation")},hu=rn,yu=function(t,e,n){var r,o,i,c,u,a,s,f=n&&n.that,l=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),v=Bo(e,f),h=function(t){return r&&ti(r,"normal",t),new ni(!0,t)},y=function(t){return l?(Ho(t),d?v(t[0],t[1],h):v(t[0],t[1])):d?v(t,h):v(t)};if(p)r=t;else{if(!(o=Zo(t)))throw ei(Yo(t)+" is not iterable");if(Xo(o)){for(i=0,c=Jo(t);c>i;i++)if((u=y(t[i]))&&$o(ri,u))return u;return new ni(!1)}r=Qo(t,o)}for(a=r.next;!(s=Vo(a,r)).done;){try{u=y(s.value)}catch(t){ti(r,"throw",t)}if("object"==typeof u&&u&&$o(ri,u))return u}return new ni(!1)},gu=function(t,e){if(!e&&!ii)return!1;var n=!1;try{var r={};r[oi]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},bu=function(t,e){var n,r=Ai(t).constructor;return void 0===r||null==(n=Ai(r)[Mi])?e:Li(n)},mu=jc.set,wu=Uc,Ou=function(t,e){if(zc(t),Bc(e)&&e.constructor===t)return e;var n=Vc.f(t);return(0,n.resolve)(e),n.promise},ju=function(t,e){var n=Hc.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))},Su=Kc,Tu=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Eu=Zc,Pu=Mn,Iu=Gr,xu=tu,Au=Ki,Lu=ot,Mu=ne("species"),Ru="Promise",ku=Pu.getterFor(Ru),Cu=Pu.set,Fu=Pu.getterFor(Ru),_u=iu&&iu.prototype,Nu=iu,Gu=_u,Du=nu.TypeError,Uu=nu.document,Ku=nu.process,Wu=Su.f,qu=Wu,zu=!!(Uu&&Uu.createEvent&&nu.dispatchEvent),Bu=pu(nu.PromiseRejectionEvent),Vu="unhandledrejection",Hu=!1,Yu=Iu(Ru,(function(){var t=hu(Nu),e=t!==String(Nu);if(!e&&66===Lu)return!0;if(Lu>=51&&/native code/.test(t))return!1;var n=new Nu((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[Mu]=r,!(Hu=n.then((function(){}))instanceof r)||!e&&xu&&!Bu})),Xu=Yu||!gu((function(t){Nu.all(t).catch((function(){}))})),Ju=function(t){var e;return!(!du(t)||!pu(e=t.then))&&e},$u=function(t,e){var n,r,o,i=e.value,c=1==e.state,u=c?t.ok:t.fail,a=t.resolve,s=t.reject,f=t.domain;try{u?(c||(2===e.rejection&&na(e),e.rejection=1),!0===u?n=i:(f&&f.enter(),n=u(i),f&&(f.exit(),o=!0)),n===t.promise?s(Du("Promise-chain cycle")):(r=Ju(n))?ou(r,n,a,s):a(n)):s(i)}catch(t){f&&!o&&f.exit(),s(t)}},Qu=function(t,e){t.notified||(t.notified=!0,wu((function(){for(var n,r=t.reactions;n=r.get();)$u(n,t);t.notified=!1,e&&!t.rejection&&ta(t)})))},Zu=function(t,e,n){var r,o;zu?((r=Uu.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),nu.dispatchEvent(r)):r={promise:e,reason:n},!Bu&&(o=nu["on"+t])?o(r):t===Vu&&ju("Unhandled promise rejection",n)},ta=function(t){ou(mu,nu,(function(){var e,n=t.facade,r=t.value;if(ea(t)&&(e=Tu((function(){Au?Ku.emit("unhandledRejection",r,n):Zu(Vu,n,r)})),t.rejection=Au||ea(t)?2:1,e.error))throw e.value}))},ea=function(t){return 1!==t.rejection&&!t.parent},na=function(t){ou(mu,nu,(function(){var e=t.facade;Au?Ku.emit("rejectionHandled",e):Zu("rejectionhandled",e,t.value)}))},ra=function(t,e,n){return function(r){t(e,r,n)}},oa=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,Qu(t,!0))},ia=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw Du("Promise can't be resolved itself");var r=Ju(e);r?wu((function(){var n={done:!1};try{ou(r,e,ra(ia,n,t),ra(oa,n,t))}catch(e){oa(n,e,t)}})):(t.value=e,t.state=1,Qu(t,!1))}catch(e){oa({done:!1},e,t)}}};if(Yu&&(Gu=(Nu=function(t){vu(this,Gu),lu(t),ou(Xc,this);var e=ku(this);try{t(ra(ia,e),ra(oa,e))}catch(t){oa(e,t)}}).prototype,(Xc=function(t){Cu(this,{type:Ru,done:!1,notified:!1,parent:!1,reactions:new Eu,rejection:!1,state:0,value:void 0})}).prototype=uu(Gu,{then:function(t,e){var n=Fu(this),r=Wu(bu(this,Nu));return n.parent=!0,r.ok=!pu(t)||t,r.fail=pu(e)&&e,r.domain=Au?Ku.domain:void 0,0==n.state?n.reactions.add(r):wu((function(){$u(r,n)})),r.promise},catch:function(t){return this.then(void 0,t)}}),Jc=function(){var t=new Xc,e=ku(t);this.promise=t,this.resolve=ra(ia,e),this.reject=ra(oa,e)},Su.f=Wu=function(t){return t===Nu||t===$c?new Jc(t):qu(t)},pu(iu)&&_u!==Object.prototype)){Qc=_u.then,Hu||(cu(_u,"then",(function(t,e){var n=this;return new Nu((function(t,e){ou(Qc,n,t,e)})).then(t,e)}),{unsafe:!0}),cu(_u,"catch",Gu.catch,{unsafe:!0}));try{delete _u.constructor}catch(t){}au&&au(_u,Gu)}eu({global:!0,wrap:!0,forced:Yu},{Promise:Nu}),su(Nu,Ru,!1),fu(Ru),$c=ru(Ru),eu({target:Ru,stat:!0,forced:Yu},{reject:function(t){var e=Wu(this);return ou(e.reject,void 0,t),e.promise}}),eu({target:Ru,stat:!0,forced:Yu},{resolve:function(t){return Ou(this,t)}}),eu({target:Ru,stat:!0,forced:Xu},{all:function(t){var e=this,n=Wu(e),r=n.resolve,o=n.reject,i=Tu((function(){var n=lu(e.resolve),i=[],c=0,u=1;yu(t,(function(t){var a=c++,s=!1;u++,ou(n,e,t).then((function(t){s||(s=!0,i[a]=t,--u||r(i))}),o)})),--u||r(i)}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=Wu(e),r=n.reject,o=Tu((function(){var o=lu(e.resolve);yu(t,(function(t){ou(o,e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var ca=hr,ua=yr,aa=Object.keys||function(t){return ca(t,ua)},sa=f,fa=I,la=v,pa=s,da=aa,va=mr,ha=h,ya=Nt,ga=N,ba=Object.assign,ma=Object.defineProperty,wa=fa([].concat),Oa=!ba||pa((function(){if(sa&&1!==ba({b:1},ba(ma({},"a",{enumerable:!0,get:function(){ma(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=ba({},t)[n]||da(ba({},e)).join("")!=r}))?function(t,e){for(var n=ya(t),r=arguments.length,o=1,i=va.f,c=ha.f;r>o;)for(var u,a=ga(arguments[o++]),s=i?wa(da(a),i(a)):da(a),f=s.length,l=0;f>l;)u=s[l++],sa&&!la(c,a,u)||(n[u]=a[u]);return n}:ba,ja=Oa;Vr({target:"Object",stat:!0,forced:Object.assign!==ja},{assign:ja});var Sa={},Ta=f,Ea=Le,Pa=Ae,Ia=Fe,xa=W,Aa=aa;Sa.f=Ta&&!Ea?Object.defineProperties:function(t,e){Ia(t);for(var n,r=xa(e),o=Aa(e),i=o.length,c=0;i>c;)Pa.f(t,n=o[c++],r[n]);return t};var La,Ma=Fe,Ra=Sa,ka=yr,Ca=dn,Fa=Ni,_a=ge,Na=pn("IE_PROTO"),Ga=function(){},Da=function(t){return"<script>"+t+"</"+"script>"},Ua=function(t){t.write(Da("")),t.close();var e=t.parentWindow.Object;return t=null,e},Ka=function(){try{La=new ActiveXObject("htmlfile")}catch(t){}var t,e;Ka="undefined"!=typeof document?document.domain&&La?Ua(La):((e=_a("iframe")).style.display="none",Fa.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Da("document.F=Object")),t.close(),t.F):Ua(La);for(var n=ka.length;n--;)delete Ka.prototype[ka[n]];return Ka()};Ca[Na]=!0;var Wa=Object.create||function(t,e){var n;return null!==t?(Ga.prototype=Ma(t),n=new Ga,Ga.prototype=null,n[Na]=t):n=Ka(),void 0===e?n:Ra.f(n,e)},qa=Wa,za=Ae,Ba=ne("unscopables"),Va=Array.prototype;null==Va[Ba]&&za.f(Va,Ba,{configurable:!0,value:qa(null)});var Ha,Ya,Xa,Ja=!s((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),$a=u,Qa=Ut,Za=q,ts=Nt,es=Ja,ns=pn("IE_PROTO"),rs=$a.Object,os=rs.prototype,is=es?rs.getPrototypeOf:function(t){var e=ts(t);if(Qa(e,ns))return e[ns];var n=e.constructor;return Za(n)&&e instanceof n?n.prototype:e instanceof rs?os:null},cs=s,us=q,as=is,ss=Je.exports,fs=ne("iterator"),ls=!1;[].keys&&("next"in(Xa=[].keys())?(Ya=as(as(Xa)))!==Object.prototype&&(Ha=Ya):ls=!0);var ps=null==Ha||cs((function(){var t={};return Ha[fs].call(t)!==t}));ps&&(Ha={}),us(Ha[fs])||ss(Ha,fs,(function(){return this}));var ds={IteratorPrototype:Ha,BUGGY_SAFARI_ITERATORS:ls},vs=ds.IteratorPrototype,hs=Wa,ys=O,gs=co,bs=bo,ms=function(){return this},ws=Vr,Os=v,js=Nn,Ss=q,Ts=function(t,e,n,r){var o=e+" Iterator";return t.prototype=hs(vs,{next:ys(+!r,n)}),gs(t,o,!1),bs[o]=ms,t},Es=is,Ps=no,Is=co,xs=Xe,As=Je.exports,Ls=bo,Ms=js.PROPER,Rs=js.CONFIGURABLE,ks=ds.IteratorPrototype,Cs=ds.BUGGY_SAFARI_ITERATORS,Fs=ne("iterator"),_s="keys",Ns="values",Gs="entries",Ds=function(){return this},Us=W,Ks=function(t){Va[Ba][t]=!0},Ws=bo,qs=Mn,zs=Ae.f,Bs=function(t,e,n,r,o,i,c){Ts(n,e,r);var u,a,s,f=function(t){if(t===o&&h)return h;if(!Cs&&t in d)return d[t];switch(t){case _s:case Ns:case Gs:return function(){return new n(this,t)}}return function(){return new n(this)}},l=e+" Iterator",p=!1,d=t.prototype,v=d[Fs]||d["@@iterator"]||o&&d[o],h=!Cs&&v||f(o),y="Array"==e&&d.entries||v;if(y&&(u=Es(y.call(new t)))!==Object.prototype&&u.next&&(Es(u)!==ks&&(Ps?Ps(u,ks):Ss(u[Fs])||As(u,Fs,Ds)),Is(u,l,!0)),Ms&&o==Ns&&v&&v.name!==Ns&&(Rs?xs(d,"name",Ns):(p=!0,h=function(){return Os(v,this)})),o)if(a={values:f(Ns),keys:i?h:f(_s),entries:f(Gs)},c)for(s in a)(Cs||p||!(s in d))&&As(d,s,a[s]);else ws({target:e,proto:!0,forced:Cs||p},a);return d[Fs]!==h&&As(d,Fs,h,{name:o}),Ls[e]=h,a},Vs=f,Hs="Array Iterator",Ys=qs.set,Xs=qs.getterFor(Hs),Js=Bs(Array,"Array",(function(t,e){Ys(this,{type:Hs,target:Us(t),index:0,kind:e})}),(function(){var t=Xs(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),$s=Ws.Arguments=Ws.Array;if(Ks("keys"),Ks("values"),Ks("entries"),Vs&&"values"!==$s.name)try{zs($s,"name",{value:"values"})}catch(t){}var Qs=ge("span").classList,Zs=Qs&&Qs.constructor&&Qs.constructor.prototype,tf=Zs===Object.prototype?void 0:Zs,ef=u,nf={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},rf=tf,of=Js,cf=Xe,uf=ne,af=uf("iterator"),sf=uf("toStringTag"),ff=of.values,lf=function(t,e){if(t){if(t[af]!==ff)try{cf(t,af,ff)}catch(e){t[af]=ff}if(t[sf]||cf(t,sf,e),nf[e])for(var n in of)if(t[n]!==of[n])try{cf(t,n,of[n])}catch(e){t[n]=of[n]}}};for(var pf in nf)lf(ef[pf]&&ef[pf].prototype,pf);
 /*! *****************************************************************************
	 Copyright (c) Microsoft Corporation.
 
	 Permission to use, copy, modify, and/or distribute this software for any
	 purpose with or without fee is hereby granted.
 
	 THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	 REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	 AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	 INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	 LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	 OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	 PERFORMANCE OF THIS SOFTWARE.
	 ***************************************************************************** */
 function df(t,e,n,r){return new(n||(n=Promise))((function(o,i){function c(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,u)}a((r=r.apply(t,e||[])).next())}))}lf(rf,"DOMTokenList");const vf=({store:t,params:i,logger:c,options:u,provider:a,emitter:s})=>df(void 0,void 0,void 0,(function*(){const f={client:null,modal:new n.NightlyConnectModal,accounts:[]},l=()=>f.accounts,p={createKey:()=>{throw new Error("Not implemented")},getPublicKey:t=>df(void 0,void 0,void 0,(function*(){const n=l().find((e=>e.accountId===t));if(!n)throw new Error("Failed to find public key for account");return e.utils.PublicKey.from(n.publicKey)})),signMessage:(t,n)=>df(void 0,void 0,void 0,(function*(){if(!l().find((t=>t.accountId===n)))throw new Error("Failed to find account for signing");try{const n=e.transactions.Transaction.decode(Buffer.from(t));return{signature:(yield f.client.signTransaction(n)).signature.data,publicKey:n.publicKey}}catch(t){throw c.log("Failed to sign message"),c.error(t),Error("Invalid message. Only transactions can be signed")}}))},d=()=>df(void 0,void 0,void 0,(function*(){var t;null===(t=f.client)||void 0===t||t.ws.close()})),v=e=>{const n=r.getActiveAccount(t.getState()),{contract:o}=t.getState();if(!n||!o)throw new Error("Wallet not signed in");return e.map((t=>({signerId:t.signerId||n.accountId,receiverId:t.receiverId||o.contractId,actions:t.actions})))};return{signIn(){return df(this,void 0,void 0,(function*(){return new Promise(((t,e)=>{const r=l();if(r.length)return t(r);try{n.AppNear.build(Object.assign(Object.assign({},i),{onUserConnect:e=>{f.accounts.push(e),f.modal.onClose=void 0,f.modal.closeModal(),t(l())}})).then((t=>{t.ws.onclose=()=>{f.client=null,f.accounts=[],s.emit("signedOut",null)},f.client=t,f.modal.openModal(t.sessionId,n.NETWORK.NEAR),f.modal.onClose=()=>{e(new Error("User cancelled pairing"))}}))}catch(t){d(),e(t)}}))}))},signOut:d,getAccounts(){return df(this,void 0,void 0,(function*(){return l().map((({accountId:t})=>({accountId:t})))}))},signAndSendTransaction({signerId:t,receiverId:e,actions:n}){var r;return df(this,void 0,void 0,(function*(){c.log("signAndSendTransaction",{signerId:t,receiverId:e,actions:n});const i=l();if(!(null===(r=f.client)||void 0===r?void 0:r.sessionId)||!i.length)throw new Error("Wallet not signed in");const[s]=yield o.signTransactions(v([{signerId:t,receiverId:e,actions:n}]),p,u.network);return a.sendTransaction(s)}))},signAndSendTransactions({transactions:t}){var e;return df(this,void 0,void 0,(function*(){c.log("signAndSendTransactions",{transactions:t});const n=l();if(!(null===(e=f.client)||void 0===e?void 0:e.sessionId)||!n.length)throw new Error("Wallet not signed in");const r=yield o.signTransactions(v(t),p,u.network),i=[];for(let t=0;t<r.length;t++)i.push(yield a.sendTransaction(r[t]));return i}))}}}));t.setupNightlyConnect=function({appMetadata:t,timeout:e,url:n,iconUrl:r="./assets/nightly-connect.png"}){return()=>df(this,void 0,void 0,(function*(){return{id:"nightly-connect",type:"bridge",metadata:{name:"Nightly Connect",description:null,iconUrl:r,deprecated:!1,available:!0},init:r=>vf(Object.assign(Object.assign({},r),{params:{appMetadata:t,timeout:e,url:n}}))}}))},Object.defineProperty(t,"__esModule",{value:!0})}));