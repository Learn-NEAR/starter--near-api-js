/**
 * Minified by jsDelivr using Terser v5.14.1.
 * Original file: /npm/@near-wallet-selector/wallet-connect@5.0.3/index.umd.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
 !function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@near-wallet-selector/core"),require("@walletconnect/sign-client"),require("@walletconnect/qrcode-modal")):"function"==typeof define&&define.amd?define(["exports","@near-wallet-selector/core","@walletconnect/sign-client","@walletconnect/qrcode-modal"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).WalletConnect={},t.core,t.Client,t.QRCodeModal)}(this,(function(t,e,n,r){"use strict";function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=o(n),c=o(r),a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},u=function(t){return t&&t.Math==Math&&t},s=u("object"==typeof globalThis&&globalThis)||u("object"==typeof window&&window)||u("object"==typeof self&&self)||u("object"==typeof a&&a)||function(){return this}()||Function("return this")(),f=function(t){try{return!!t()}catch(t){return!0}},l=!f((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),p=l,d=Function.prototype,v=d.bind,h=d.call,g=p&&v.bind(h,h),y=p?function(t){return t&&g(t)}:function(t){return t&&function(){return h.apply(t,arguments)}},m=y,b=m({}.toString),w=m("".slice),x=function(t){return w(b(t),8,-1)},S=y,O=f,j=x,E=s.Object,I=S("".split),T=O((function(){return!E("z").propertyIsEnumerable(0)}))?function(t){return"String"==j(t)?I(t,""):E(t)}:E,P=s.TypeError,A=function(t){if(null==t)throw P("Can't call method on "+t);return t},R=T,L=A,_=function(t){return R(L(t))},k={exports:{}},C=s,M=Object.defineProperty,F=function(t,e){try{M(C,t,{value:e,configurable:!0,writable:!0})}catch(n){C[t]=e}return e},N=F,U="__core-js_shared__",D=s[U]||N(U,{}),G=D;(k.exports=function(t,e){return G[t]||(G[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.21.1",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"});var q,W,B=A,z=s.Object,V=function(t){return z(B(t))},Y=V,H=y({}.hasOwnProperty),K=Object.hasOwn||function(t,e){return H(Y(t),e)},$=y,X=0,Q=Math.random(),J=$(1..toString),Z=function(t){return"Symbol("+(void 0===t?"":t)+")_"+J(++X+Q,36)},tt=function(t){return"function"==typeof t},et=s,nt=tt,rt=function(t){return nt(t)?t:void 0},ot=function(t,e){return arguments.length<2?rt(et[t]):et[t]&&et[t][e]},it=ot("navigator","userAgent")||"",ct=s,at=it,ut=ct.process,st=ct.Deno,ft=ut&&ut.versions||st&&st.version,lt=ft&&ft.v8;lt&&(W=(q=lt.split("."))[0]>0&&q[0]<4?1:+(q[0]+q[1])),!W&&at&&(!(q=at.match(/Edge\/(\d+)/))||q[1]>=74)&&(q=at.match(/Chrome\/(\d+)/))&&(W=+q[1]);var pt=W,dt=pt,vt=f,ht=!!Object.getOwnPropertySymbols&&!vt((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&dt&&dt<41})),gt=ht&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,yt=s,mt=k.exports,bt=K,wt=Z,xt=ht,St=gt,Ot=mt("wks"),jt=yt.Symbol,Et=jt&&jt.for,It=St?jt:jt&&jt.withoutSetter||wt,Tt=function(t){if(!bt(Ot,t)||!xt&&"string"!=typeof Ot[t]){var e="Symbol."+t;xt&&bt(jt,t)?Ot[t]=jt[t]:Ot[t]=St&&Et?Et(e):It(e)}return Ot[t]},Pt=tt,At=function(t){return"object"==typeof t?null!==t:Pt(t)},Rt=s,Lt=At,_t=Rt.String,kt=Rt.TypeError,Ct=function(t){if(Lt(t))return t;throw kt(_t(t)+" is not an object")},Mt={},Ft=!f((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Nt=Ft&&f((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Ut={},Dt=At,Gt=s.document,qt=Dt(Gt)&&Dt(Gt.createElement),Wt=function(t){return qt?Gt.createElement(t):{}},Bt=Wt,zt=!Ft&&!f((function(){return 7!=Object.defineProperty(Bt("div"),"a",{get:function(){return 7}}).a})),Vt=l,Yt=Function.prototype.call,Ht=Vt?Yt.bind(Yt):function(){return Yt.apply(Yt,arguments)},Kt=y({}.isPrototypeOf),$t=ot,Xt=tt,Qt=Kt,Jt=gt,Zt=s.Object,te=Jt?function(t){return"symbol"==typeof t}:function(t){var e=$t("Symbol");return Xt(e)&&Qt(e.prototype,Zt(t))},ee=s.String,ne=function(t){try{return ee(t)}catch(t){return"Object"}},re=tt,oe=ne,ie=s.TypeError,ce=function(t){if(re(t))return t;throw ie(oe(t)+" is not a function")},ae=ce,ue=function(t,e){var n=t[e];return null==n?void 0:ae(n)},se=Ht,fe=tt,le=At,pe=s.TypeError,de=Ht,ve=At,he=te,ge=ue,ye=function(t,e){var n,r;if("string"===e&&fe(n=t.toString)&&!le(r=se(n,t)))return r;if(fe(n=t.valueOf)&&!le(r=se(n,t)))return r;if("string"!==e&&fe(n=t.toString)&&!le(r=se(n,t)))return r;throw pe("Can't convert object to primitive value")},me=Tt,be=s.TypeError,we=me("toPrimitive"),xe=function(t,e){if(!ve(t)||he(t))return t;var n,r=ge(t,we);if(r){if(void 0===e&&(e="default"),n=de(r,t,e),!ve(n)||he(n))return n;throw be("Can't convert object to primitive value")}return void 0===e&&(e="number"),ye(t,e)},Se=te,Oe=function(t){var e=xe(t,"string");return Se(e)?e:e+""},je=Ft,Ee=zt,Ie=Nt,Te=Ct,Pe=Oe,Ae=s.TypeError,Re=Object.defineProperty,Le=Object.getOwnPropertyDescriptor,_e="enumerable",ke="configurable",Ce="writable";Ut.f=je?Ie?function(t,e,n){if(Te(t),e=Pe(e),Te(n),"function"==typeof t&&"prototype"===e&&"value"in n&&Ce in n&&!n.writable){var r=Le(t,e);r&&r.writable&&(t[e]=n.value,n={configurable:ke in n?n.configurable:r.configurable,enumerable:_e in n?n.enumerable:r.enumerable,writable:!1})}return Re(t,e,n)}:Re:function(t,e,n){if(Te(t),e=Pe(e),Te(n),Ee)try{return Re(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Ae("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var Me=Math.ceil,Fe=Math.floor,Ne=function(t){var e=+t;return e!=e||0===e?0:(e>0?Fe:Me)(e)},Ue=Ne,De=Math.max,Ge=Math.min,qe=function(t,e){var n=Ue(t);return n<0?De(n+e,0):Ge(n,e)},We=Ne,Be=Math.min,ze=function(t){return t>0?Be(We(t),9007199254740991):0},Ve=ze,Ye=function(t){return Ve(t.length)},He=_,Ke=qe,$e=Ye,Xe=function(t){return function(e,n,r){var o,i=He(e),c=$e(i),a=Ke(r,c);if(t&&n!=n){for(;c>a;)if((o=i[a++])!=o)return!0}else for(;c>a;a++)if((t||a in i)&&i[a]===n)return t||a||0;return!t&&-1}},Qe={includes:Xe(!0),indexOf:Xe(!1)},Je={},Ze=K,tn=_,en=Qe.indexOf,nn=Je,rn=y([].push),on=function(t,e){var n,r=tn(t),o=0,i=[];for(n in r)!Ze(nn,n)&&Ze(r,n)&&rn(i,n);for(;e.length>o;)Ze(r,n=e[o++])&&(~en(i,n)||rn(i,n));return i},cn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],an=on,un=cn,sn=Object.keys||function(t){return an(t,un)},fn=Ft,ln=Nt,pn=Ut,dn=Ct,vn=_,hn=sn;Mt.f=fn&&!ln?Object.defineProperties:function(t,e){dn(t);for(var n,r=vn(e),o=hn(e),i=o.length,c=0;i>c;)pn.f(t,n=o[c++],r[n]);return t};var gn,yn=ot("document","documentElement"),mn=k.exports,bn=Z,wn=mn("keys"),xn=function(t){return wn[t]||(wn[t]=bn(t))},Sn=Ct,On=Mt,jn=cn,En=Je,In=yn,Tn=Wt,Pn=xn("IE_PROTO"),An=function(){},Rn=function(t){return"<script>"+t+"</"+"script>"},Ln=function(t){t.write(Rn("")),t.close();var e=t.parentWindow.Object;return t=null,e},_n=function(){try{gn=new ActiveXObject("htmlfile")}catch(t){}var t,e;_n="undefined"!=typeof document?document.domain&&gn?Ln(gn):((e=Tn("iframe")).style.display="none",In.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Rn("document.F=Object")),t.close(),t.F):Ln(gn);for(var n=jn.length;n--;)delete _n.prototype[jn[n]];return _n()};En[Pn]=!0;var kn=Object.create||function(t,e){var n;return null!==t?(An.prototype=Sn(t),n=new An,An.prototype=null,n[Pn]=t):n=_n(),void 0===e?n:On.f(n,e)},Cn=kn,Mn=Ut,Fn=Tt("unscopables"),Nn=Array.prototype;null==Nn[Fn]&&Mn.f(Nn,Fn,{configurable:!0,value:Cn(null)});var Un={},Dn=tt,Gn=D,qn=y(Function.toString);Dn(Gn.inspectSource)||(Gn.inspectSource=function(t){return qn(t)});var Wn,Bn,zn,Vn=Gn.inspectSource,Yn=tt,Hn=Vn,Kn=s.WeakMap,$n=Yn(Kn)&&/native code/.test(Hn(Kn)),Xn=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},Qn=Ut,Jn=Xn,Zn=Ft?function(t,e,n){return Qn.f(t,e,Jn(1,n))}:function(t,e,n){return t[e]=n,t},tr=$n,er=s,nr=y,rr=At,or=Zn,ir=K,cr=D,ar=xn,ur=Je,sr="Object already initialized",fr=er.TypeError,lr=er.WeakMap;if(tr||cr.state){var pr=cr.state||(cr.state=new lr),dr=nr(pr.get),vr=nr(pr.has),hr=nr(pr.set);Wn=function(t,e){if(vr(pr,t))throw new fr(sr);return e.facade=t,hr(pr,t,e),e},Bn=function(t){return dr(pr,t)||{}},zn=function(t){return vr(pr,t)}}else{var gr=ar("state");ur[gr]=!0,Wn=function(t,e){if(ir(t,gr))throw new fr(sr);return e.facade=t,or(t,gr,e),e},Bn=function(t){return ir(t,gr)?t[gr]:{}},zn=function(t){return ir(t,gr)}}var yr={set:Wn,get:Bn,has:zn,enforce:function(t){return zn(t)?Bn(t):Wn(t,{})},getterFor:function(t){return function(e){var n;if(!rr(e)||(n=Bn(e)).type!==t)throw fr("Incompatible receiver, "+t+" required");return n}}},mr={},br={},wr={}.propertyIsEnumerable,xr=Object.getOwnPropertyDescriptor,Sr=xr&&!wr.call({1:2},1);br.f=Sr?function(t){var e=xr(this,t);return!!e&&e.enumerable}:wr;var Or=Ft,jr=Ht,Er=br,Ir=Xn,Tr=_,Pr=Oe,Ar=K,Rr=zt,Lr=Object.getOwnPropertyDescriptor;mr.f=Or?Lr:function(t,e){if(t=Tr(t),e=Pr(e),Rr)try{return Lr(t,e)}catch(t){}if(Ar(t,e))return Ir(!jr(Er.f,t,e),t[e])};var _r={exports:{}},kr=Ft,Cr=K,Mr=Function.prototype,Fr=kr&&Object.getOwnPropertyDescriptor,Nr=Cr(Mr,"name"),Ur={EXISTS:Nr,PROPER:Nr&&"something"===function(){}.name,CONFIGURABLE:Nr&&(!kr||kr&&Fr(Mr,"name").configurable)},Dr=s,Gr=tt,qr=K,Wr=Zn,Br=F,zr=Vn,Vr=Ur.CONFIGURABLE,Yr=yr.get,Hr=yr.enforce,Kr=String(String).split("String");(_r.exports=function(t,e,n,r){var o,i=!!r&&!!r.unsafe,c=!!r&&!!r.enumerable,a=!!r&&!!r.noTargetGet,u=r&&void 0!==r.name?r.name:e;Gr(n)&&("Symbol("===String(u).slice(0,7)&&(u="["+String(u).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!qr(n,"name")||Vr&&n.name!==u)&&Wr(n,"name",u),(o=Hr(n)).source||(o.source=Kr.join("string"==typeof u?u:""))),t!==Dr?(i?!a&&t[e]&&(c=!0):delete t[e],c?t[e]=n:Wr(t,e,n)):c?t[e]=n:Br(e,n)})(Function.prototype,"toString",(function(){return Gr(this)&&Yr(this).source||zr(this)}));var $r={},Xr=on,Qr=cn.concat("length","prototype");$r.f=Object.getOwnPropertyNames||function(t){return Xr(t,Qr)};var Jr={};Jr.f=Object.getOwnPropertySymbols;var Zr,to,eo,no=ot,ro=$r,oo=Jr,io=Ct,co=y([].concat),ao=no("Reflect","ownKeys")||function(t){var e=ro.f(io(t)),n=oo.f;return n?co(e,n(t)):e},uo=K,so=ao,fo=mr,lo=Ut,po=f,vo=tt,ho=/#|\.prototype\./,go=function(t,e){var n=mo[yo(t)];return n==wo||n!=bo&&(vo(e)?po(e):!!e)},yo=go.normalize=function(t){return String(t).replace(ho,".").toLowerCase()},mo=go.data={},bo=go.NATIVE="N",wo=go.POLYFILL="P",xo=go,So=s,Oo=mr.f,jo=Zn,Eo=_r.exports,Io=F,To=function(t,e,n){for(var r=so(e),o=lo.f,i=fo.f,c=0;c<r.length;c++){var a=r[c];uo(t,a)||n&&uo(n,a)||o(t,a,i(e,a))}},Po=xo,Ao=function(t,e){var n,r,o,i,c,a=t.target,u=t.global,s=t.stat;if(n=u?So:s?So[a]||Io(a,{}):(So[a]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(c=Oo(n,r))&&c.value:n[r],!Po(u?r:a+(s?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;To(i,o)}(t.sham||o&&o.sham)&&jo(i,"sham",!0),Eo(n,r,i,t)}},Ro=!f((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Lo=s,_o=K,ko=tt,Co=V,Mo=Ro,Fo=xn("IE_PROTO"),No=Lo.Object,Uo=No.prototype,Do=Mo?No.getPrototypeOf:function(t){var e=Co(t);if(_o(e,Fo))return e[Fo];var n=e.constructor;return ko(n)&&e instanceof n?n.prototype:e instanceof No?Uo:null},Go=f,qo=tt,Wo=Do,Bo=_r.exports,zo=Tt("iterator"),Vo=!1;[].keys&&("next"in(eo=[].keys())?(to=Wo(Wo(eo)))!==Object.prototype&&(Zr=to):Vo=!0);var Yo=null==Zr||Go((function(){var t={};return Zr[zo].call(t)!==t}));Yo&&(Zr={}),qo(Zr[zo])||Bo(Zr,zo,(function(){return this}));var Ho={IteratorPrototype:Zr,BUGGY_SAFARI_ITERATORS:Vo},Ko=Ut.f,$o=K,Xo=Tt("toStringTag"),Qo=function(t,e,n){t&&!n&&(t=t.prototype),t&&!$o(t,Xo)&&Ko(t,Xo,{configurable:!0,value:e})},Jo=Ho.IteratorPrototype,Zo=kn,ti=Xn,ei=Qo,ni=Un,ri=function(){return this},oi=s,ii=tt,ci=oi.String,ai=oi.TypeError,ui=y,si=Ct,fi=function(t){if("object"==typeof t||ii(t))return t;throw ai("Can't set "+ci(t)+" as a prototype")},li=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=ui(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return si(n),fi(r),e?t(n,r):n.__proto__=r,n}}():void 0),pi=Ao,di=Ht,vi=Ur,hi=tt,gi=function(t,e,n,r){var o=e+" Iterator";return t.prototype=Zo(Jo,{next:ti(+!r,n)}),ei(t,o,!1),ni[o]=ri,t},yi=Do,mi=li,bi=Qo,wi=Zn,xi=_r.exports,Si=Un,Oi=vi.PROPER,ji=vi.CONFIGURABLE,Ei=Ho.IteratorPrototype,Ii=Ho.BUGGY_SAFARI_ITERATORS,Ti=Tt("iterator"),Pi="keys",Ai="values",Ri="entries",Li=function(){return this},_i=_,ki=function(t){Nn[Fn][t]=!0},Ci=Un,Mi=yr,Fi=Ut.f,Ni=function(t,e,n,r,o,i,c){gi(n,e,r);var a,u,s,f=function(t){if(t===o&&h)return h;if(!Ii&&t in d)return d[t];switch(t){case Pi:case Ai:case Ri:return function(){return new n(this,t)}}return function(){return new n(this)}},l=e+" Iterator",p=!1,d=t.prototype,v=d[Ti]||d["@@iterator"]||o&&d[o],h=!Ii&&v||f(o),g="Array"==e&&d.entries||v;if(g&&(a=yi(g.call(new t)))!==Object.prototype&&a.next&&(yi(a)!==Ei&&(mi?mi(a,Ei):hi(a[Ti])||xi(a,Ti,Li)),bi(a,l,!0)),Oi&&o==Ai&&v&&v.name!==Ai&&(ji?wi(d,"name",Ai):(p=!0,h=function(){return di(v,this)})),o)if(u={values:f(Ai),keys:i?h:f(Pi),entries:f(Ri)},c)for(s in u)(Ii||p||!(s in d))&&xi(d,s,u[s]);else pi({target:e,proto:!0,forced:Ii||p},u);return d[Ti]!==h&&xi(d,Ti,h,{name:o}),Si[e]=h,u},Ui=Ft,Di="Array Iterator",Gi=Mi.set,qi=Mi.getterFor(Di),Wi=Ni(Array,"Array",(function(t,e){Gi(this,{type:Di,target:_i(t),index:0,kind:e})}),(function(){var t=qi(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),Bi=Ci.Arguments=Ci.Array;if(ki("keys"),ki("values"),ki("entries"),Ui&&"values"!==Bi.name)try{Fi(Bi,"name",{value:"values"})}catch(t){}var zi=Wt("span").classList,Vi=zi&&zi.constructor&&zi.constructor.prototype,Yi=Vi===Object.prototype?void 0:Vi,Hi=s,Ki={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},$i=Yi,Xi=Wi,Qi=Zn,Ji=Tt,Zi=Ji("iterator"),tc=Ji("toStringTag"),ec=Xi.values,nc=function(t,e){if(t){if(t[Zi]!==ec)try{Qi(t,Zi,ec)}catch(e){t[Zi]=ec}if(t[tc]||Qi(t,tc,e),Ki[e])for(var n in Xi)if(t[n]!==Xi[n])try{Qi(t,n,Xi[n])}catch(e){t[n]=Xi[n]}}};for(var rc in Ki)nc(Hi[rc]&&Hi[rc].prototype,rc);nc($i,"DOMTokenList");var oc={};oc[Tt("toStringTag")]="z";var ic,cc,ac=s,uc="[object z]"===String(oc),sc=tt,fc=x,lc=Tt("toStringTag"),pc=ac.Object,dc="Arguments"==fc(function(){return arguments}()),vc=uc?fc:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=pc(t),lc))?n:dc?fc(e):"Object"==(r=fc(e))&&sc(e.callee)?"Arguments":r},hc=vc,gc=s.String,yc=function(t){if("Symbol"===hc(t))throw TypeError("Cannot convert a Symbol value to a string");return gc(t)},mc=Ct,bc=f,wc=s.RegExp,xc=bc((function(){var t=wc("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),Sc=xc||bc((function(){return!wc("a","y").sticky})),Oc={BROKEN_CARET:xc||bc((function(){var t=wc("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:Sc,UNSUPPORTED_Y:xc},jc=f,Ec=s.RegExp,Ic=jc((function(){var t=Ec(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),Tc=f,Pc=s.RegExp,Ac=Tc((function(){var t=Pc("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),Rc=Ht,Lc=y,_c=yc,kc=function(){var t=mc(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Cc=Oc,Mc=k.exports,Fc=kn,Nc=yr.get,Uc=Ic,Dc=Ac,Gc=Mc("native-string-replace",String.prototype.replace),qc=RegExp.prototype.exec,Wc=qc,Bc=Lc("".charAt),zc=Lc("".indexOf),Vc=Lc("".replace),Yc=Lc("".slice),Hc=(cc=/b*/g,Rc(qc,ic=/a/,"a"),Rc(qc,cc,"a"),0!==ic.lastIndex||0!==cc.lastIndex),Kc=Cc.BROKEN_CARET,$c=void 0!==/()??/.exec("")[1];(Hc||$c||Kc||Uc||Dc)&&(Wc=function(t){var e,n,r,o,i,c,a,u=this,s=Nc(u),f=_c(t),l=s.raw;if(l)return l.lastIndex=u.lastIndex,e=Rc(Wc,l,f),u.lastIndex=l.lastIndex,e;var p=s.groups,d=Kc&&u.sticky,v=Rc(kc,u),h=u.source,g=0,y=f;if(d&&(v=Vc(v,"y",""),-1===zc(v,"g")&&(v+="g"),y=Yc(f,u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==Bc(f,u.lastIndex-1))&&(h="(?: "+h+")",y=" "+y,g++),n=new RegExp("^(?:"+h+")",v)),$c&&(n=new RegExp("^"+h+"$(?!\\s)",v)),Hc&&(r=u.lastIndex),o=Rc(qc,d?n:u,y),d?o?(o.input=Yc(o.input,g),o[0]=Yc(o[0],g),o.index=u.lastIndex,u.lastIndex+=o[0].length):u.lastIndex=0:Hc&&o&&(u.lastIndex=u.global?o.index+o[0].length:r),$c&&o&&o.length>1&&Rc(Gc,o[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&p)for(o.groups=c=Fc(null),i=0;i<p.length;i++)c[(a=p[i])[0]]=o[a[1]];return o});var Xc=Wc;Ao({target:"RegExp",proto:!0,forced:/./.exec!==Xc},{exec:Xc});var Qc=l,Jc=Function.prototype,Zc=Jc.apply,ta=Jc.call,ea="object"==typeof Reflect&&Reflect.apply||(Qc?ta.bind(Zc):function(){return ta.apply(Zc,arguments)}),na=y,ra=_r.exports,oa=Xc,ia=f,ca=Tt,aa=Zn,ua=ca("species"),sa=RegExp.prototype,fa=At,la=x,pa=Tt("match"),da=y,va=f,ha=tt,ga=vc,ya=Vn,ma=function(){},ba=[],wa=ot("Reflect","construct"),xa=/^\s*(?:class|function)\b/,Sa=da(xa.exec),Oa=!xa.exec(ma),ja=function(t){if(!ha(t))return!1;try{return wa(ma,ba,t),!0}catch(t){return!1}},Ea=function(t){if(!ha(t))return!1;switch(ga(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Oa||!!Sa(xa,ya(t))}catch(t){return!0}};Ea.sham=!0;var Ia=!wa||va((function(){var t;return ja(ja.call)||!ja(Object)||!ja((function(){t=!0}))||t}))?Ea:ja,Ta=Ia,Pa=ne,Aa=s.TypeError,Ra=Ct,La=function(t){if(Ta(t))return t;throw Aa(Pa(t)+" is not a constructor")},_a=Tt("species"),ka=function(t,e){var n,r=Ra(t).constructor;return void 0===r||null==(n=Ra(r)[_a])?e:La(n)},Ca=y,Ma=Ne,Fa=yc,Na=A,Ua=Ca("".charAt),Da=Ca("".charCodeAt),Ga=Ca("".slice),qa=function(t){return function(e,n){var r,o,i=Fa(Na(e)),c=Ma(n),a=i.length;return c<0||c>=a?t?"":void 0:(r=Da(i,c))<55296||r>56319||c+1===a||(o=Da(i,c+1))<56320||o>57343?t?Ua(i,c):r:t?Ga(i,c,c+2):o-56320+(r-55296<<10)+65536}},Wa={codeAt:qa(!1),charAt:qa(!0)}.charAt,Ba=Oe,za=Ut,Va=Xn,Ya=qe,Ha=Ye,Ka=function(t,e,n){var r=Ba(e);r in t?za.f(t,r,Va(0,n)):t[r]=n},$a=s.Array,Xa=Math.max,Qa=Ht,Ja=Ct,Za=tt,tu=x,eu=Xc,nu=s.TypeError,ru=ea,ou=Ht,iu=y,cu=function(t,e,n,r){var o=ca(t),i=!ia((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),c=i&&!ia((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[ua]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return e=!0,null},n[o](""),!e}));if(!i||!c||n){var a=na(/./[o]),u=e(o,""[t],(function(t,e,n,r,o){var c=na(t),u=e.exec;return u===oa||u===sa.exec?i&&!o?{done:!0,value:a(e,n,r)}:{done:!0,value:c(n,e,r)}:{done:!1}}));ra(String.prototype,t,u[0]),ra(sa,o,u[1])}r&&aa(sa[o],"sham",!0)},au=function(t){var e;return fa(t)&&(void 0!==(e=t[pa])?!!e:"RegExp"==la(t))},uu=Ct,su=A,fu=ka,lu=function(t,e,n){return e+(n?Wa(t,e).length:1)},pu=ze,du=yc,vu=ue,hu=function(t,e,n){for(var r=Ha(t),o=Ya(e,r),i=Ya(void 0===n?r:n,r),c=$a(Xa(i-o,0)),a=0;o<i;o++,a++)Ka(c,a,t[o]);return c.length=a,c},gu=function(t,e){var n=t.exec;if(Za(n)){var r=Qa(n,t,e);return null!==r&&Ja(r),r}if("RegExp"===tu(t))return Qa(eu,t,e);throw nu("RegExp#exec called on incompatible receiver")},yu=Xc,mu=f,bu=Oc.UNSUPPORTED_Y,wu=4294967295,xu=Math.min,Su=[].push,Ou=iu(/./.exec),ju=iu(Su),Eu=iu("".slice),Iu=!mu((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));cu("split",(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=du(su(this)),o=void 0===n?wu:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!au(t))return ou(e,r,t,o);for(var i,c,a,u=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,l=new RegExp(t.source,s+"g");(i=ou(yu,l,r))&&!((c=l.lastIndex)>f&&(ju(u,Eu(r,f,i.index)),i.length>1&&i.index<r.length&&ru(Su,u,hu(i,1)),a=i[0].length,f=c,u.length>=o));)l.lastIndex===i.index&&l.lastIndex++;return f===r.length?!a&&Ou(l,"")||ju(u,""):ju(u,Eu(r,f)),u.length>o?hu(u,0,o):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:ou(e,this,t,n)}:e,[function(e,n){var o=su(this),i=null==e?void 0:vu(e,t);return i?ou(i,e,o,n):ou(r,du(o),e,n)},function(t,o){var i=uu(this),c=du(t),a=n(r,i,c,o,r!==e);if(a.done)return a.value;var u=fu(i,RegExp),s=i.unicode,f=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(bu?"g":"y"),l=new u(bu?"^(?:"+i.source+")":i,f),p=void 0===o?wu:o>>>0;if(0===p)return[];if(0===c.length)return null===gu(l,c)?[c]:[];for(var d=0,v=0,h=[];v<c.length;){l.lastIndex=bu?0:v;var g,y=gu(l,bu?Eu(c,v):c);if(null===y||(g=xu(pu(l.lastIndex+(bu?v:0)),c.length))===d)v=lu(c,v,s);else{if(ju(h,Eu(c,d,v)),h.length===p)return h;for(var m=1;m<=y.length-1;m++)if(ju(h,y[m]),h.length===p)return h;v=d=g}}return ju(h,Eu(c,d)),h}]}),!Iu,bu);var Tu=Ft,Pu=y,Au=Ht,Ru=f,Lu=sn,_u=Jr,ku=br,Cu=V,Mu=T,Fu=Object.assign,Nu=Object.defineProperty,Uu=Pu([].concat),Du=!Fu||Ru((function(){if(Tu&&1!==Fu({b:1},Fu(Nu({},"a",{enumerable:!0,get:function(){Nu(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=Fu({},t)[n]||Lu(Fu({},e)).join("")!=r}))?function(t,e){for(var n=Cu(t),r=arguments.length,o=1,i=_u.f,c=ku.f;r>o;)for(var a,u=Mu(arguments[o++]),s=i?Uu(Lu(u),i(u)):Lu(u),f=s.length,l=0;f>l;)a=s[l++],Tu&&!Au(c,u,a)||(n[a]=u[a]);return n}:Fu,Gu=Du;
 /*! *****************************************************************************
	 Copyright (c) Microsoft Corporation.
 
	 Permission to use, copy, modify, and/or distribute this software for any
	 purpose with or without fee is hereby granted.
 
	 THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	 REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	 AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	 INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	 LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	 OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	 PERFORMANCE OF THIS SOFTWARE.
	 ***************************************************************************** */
 function qu(t,e,n,r){return new(n||(n=Promise))((function(o,i){function c(t){try{u(r.next(t))}catch(t){i(t)}}function a(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((r=r.apply(t,e||[])).next())}))}Ao({target:"Object",stat:!0,forced:Object.assign!==Gu},{assign:Gu});var Wu=s.Promise,Bu=_r.exports,zu=ot,Vu=Ut,Yu=Ft,Hu=Tt("species"),Ku=Kt,$u=s.TypeError,Xu=ce,Qu=l,Ju=y(y.bind),Zu=function(t,e){return Xu(t),void 0===e?t:Qu?Ju(t,e):function(){return t.apply(e,arguments)}},ts=Un,es=Tt("iterator"),ns=Array.prototype,rs=vc,os=ue,is=Un,cs=Tt("iterator"),as=function(t){if(null!=t)return os(t,cs)||os(t,"@@iterator")||is[rs(t)]},us=Ht,ss=ce,fs=Ct,ls=ne,ps=as,ds=s.TypeError,vs=Ht,hs=Ct,gs=ue,ys=Zu,ms=Ht,bs=Ct,ws=ne,xs=function(t){return void 0!==t&&(ts.Array===t||ns[es]===t)},Ss=Ye,Os=Kt,js=function(t,e){var n=arguments.length<2?ps(t):e;if(ss(n))return fs(us(n,t));throw ds(ls(t)+" is not iterable")},Es=as,Is=function(t,e,n){var r,o;hs(t);try{if(!(r=gs(t,"return"))){if("throw"===e)throw n;return n}r=vs(r,t)}catch(t){o=!0,r=t}if("throw"===e)throw n;if(o)throw r;return hs(r),n},Ts=s.TypeError,Ps=function(t,e){this.stopped=t,this.result=e},As=Ps.prototype,Rs=Tt("iterator"),Ls=!1;try{var _s=0,ks={next:function(){return{done:!!_s++}},return:function(){Ls=!0}};ks[Rs]=function(){return this},Array.from(ks,(function(){throw 2}))}catch(t){}var Cs,Ms,Fs,Ns,Us=y([].slice),Ds=s.TypeError,Gs=/(?:ipad|iphone|ipod).*applewebkit/i.test(it),qs="process"==x(s.process),Ws=s,Bs=ea,zs=Zu,Vs=tt,Ys=K,Hs=f,Ks=yn,$s=Us,Xs=Wt,Qs=function(t,e){if(t<e)throw Ds("Not enough arguments");return t},Js=Gs,Zs=qs,tf=Ws.setImmediate,ef=Ws.clearImmediate,nf=Ws.process,rf=Ws.Dispatch,of=Ws.Function,cf=Ws.MessageChannel,af=Ws.String,uf=0,sf={},ff="onreadystatechange";try{Cs=Ws.location}catch(t){}var lf=function(t){if(Ys(sf,t)){var e=sf[t];delete sf[t],e()}},pf=function(t){return function(){lf(t)}},df=function(t){lf(t.data)},vf=function(t){Ws.postMessage(af(t),Cs.protocol+"//"+Cs.host)};tf&&ef||(tf=function(t){Qs(arguments.length,1);var e=Vs(t)?t:of(t),n=$s(arguments,1);return sf[++uf]=function(){Bs(e,void 0,n)},Ms(uf),uf},ef=function(t){delete sf[t]},Zs?Ms=function(t){nf.nextTick(pf(t))}:rf&&rf.now?Ms=function(t){rf.now(pf(t))}:cf&&!Js?(Ns=(Fs=new cf).port2,Fs.port1.onmessage=df,Ms=zs(Ns.postMessage,Ns)):Ws.addEventListener&&Vs(Ws.postMessage)&&!Ws.importScripts&&Cs&&"file:"!==Cs.protocol&&!Hs(vf)?(Ms=vf,Ws.addEventListener("message",df,!1)):Ms=ff in Xs("script")?function(t){Ks.appendChild(Xs("script")).onreadystatechange=function(){Ks.removeChild(this),lf(t)}}:function(t){setTimeout(pf(t),0)});var hf,gf,yf,mf,bf,wf,xf,Sf,Of={set:tf,clear:ef},jf=s,Ef=/ipad|iphone|ipod/i.test(it)&&void 0!==jf.Pebble,If=/web0s(?!.*chrome)/i.test(it),Tf=s,Pf=Zu,Af=mr.f,Rf=Of.set,Lf=Gs,_f=Ef,kf=If,Cf=qs,Mf=Tf.MutationObserver||Tf.WebKitMutationObserver,Ff=Tf.document,Nf=Tf.process,Uf=Tf.Promise,Df=Af(Tf,"queueMicrotask"),Gf=Df&&Df.value;Gf||(hf=function(){var t,e;for(Cf&&(t=Nf.domain)&&t.exit();gf;){e=gf.fn,gf=gf.next;try{e()}catch(t){throw gf?mf():yf=void 0,t}}yf=void 0,t&&t.enter()},Lf||Cf||kf||!Mf||!Ff?!_f&&Uf&&Uf.resolve?((xf=Uf.resolve(void 0)).constructor=Uf,Sf=Pf(xf.then,xf),mf=function(){Sf(hf)}):Cf?mf=function(){Nf.nextTick(hf)}:(Rf=Pf(Rf,Tf),mf=function(){Rf(hf)}):(bf=!0,wf=Ff.createTextNode(""),new Mf(hf).observe(wf,{characterData:!0}),mf=function(){wf.data=bf=!bf}));var qf=Gf||function(t){var e={fn:t,next:void 0};yf&&(yf.next=e),gf||(gf=e,mf()),yf=e},Wf={},Bf=ce,zf=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=Bf(e),this.reject=Bf(n)};Wf.f=function(t){return new zf(t)};var Vf=Ct,Yf=At,Hf=Wf,Kf=function(t,e){if(Vf(t),Yf(e)&&e.constructor===t)return e;var n=Hf.f(t);return(0,n.resolve)(e),n.promise},$f=s,Xf=function(){this.head=null,this.tail=null};Xf.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}};var Qf,Jf,Zf,tl,el=Xf,nl="object"==typeof window,rl=Ao,ol=s,il=ot,cl=Ht,al=Wu,ul=_r.exports,sl=function(t,e,n){for(var r in e)Bu(t,r,e[r],n);return t},fl=li,ll=Qo,pl=function(t){var e=zu(t),n=Vu.f;Yu&&e&&!e[Hu]&&n(e,Hu,{configurable:!0,get:function(){return this}})},dl=ce,vl=tt,hl=At,gl=function(t,e){if(Ku(e,t))return t;throw $u("Incorrect invocation")},yl=Vn,ml=function(t,e,n){var r,o,i,c,a,u,s,f=n&&n.that,l=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),v=ys(e,f),h=function(t){return r&&Is(r,"normal",t),new Ps(!0,t)},g=function(t){return l?(bs(t),d?v(t[0],t[1],h):v(t[0],t[1])):d?v(t,h):v(t)};if(p)r=t;else{if(!(o=Es(t)))throw Ts(ws(t)+" is not iterable");if(xs(o)){for(i=0,c=Ss(t);c>i;i++)if((a=g(t[i]))&&Os(As,a))return a;return new Ps(!1)}r=js(t,o)}for(u=r.next;!(s=ms(u,r)).done;){try{a=g(s.value)}catch(t){Is(r,"throw",t)}if("object"==typeof a&&a&&Os(As,a))return a}return new Ps(!1)},bl=function(t,e){if(!e&&!Ls)return!1;var n=!1;try{var r={};r[Rs]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},wl=ka,xl=Of.set,Sl=qf,Ol=Kf,jl=function(t,e){var n=$f.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))},El=Wf,Il=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Tl=el,Pl=yr,Al=xo,Rl=nl,Ll=qs,_l=pt,kl=Tt("species"),Cl="Promise",Ml=Pl.getterFor(Cl),Fl=Pl.set,Nl=Pl.getterFor(Cl),Ul=al&&al.prototype,Dl=al,Gl=Ul,ql=ol.TypeError,Wl=ol.document,Bl=ol.process,zl=El.f,Vl=zl,Yl=!!(Wl&&Wl.createEvent&&ol.dispatchEvent),Hl=vl(ol.PromiseRejectionEvent),Kl="unhandledrejection",$l=!1,Xl=Al(Cl,(function(){var t=yl(Dl),e=t!==String(Dl);if(!e&&66===_l)return!0;if(_l>=51&&/native code/.test(t))return!1;var n=new Dl((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[kl]=r,!($l=n.then((function(){}))instanceof r)||!e&&Rl&&!Hl})),Ql=Xl||!bl((function(t){Dl.all(t).catch((function(){}))})),Jl=function(t){var e;return!(!hl(t)||!vl(e=t.then))&&e},Zl=function(t,e){var n,r,o,i=e.value,c=1==e.state,a=c?t.ok:t.fail,u=t.resolve,s=t.reject,f=t.domain;try{a?(c||(2===e.rejection&&op(e),e.rejection=1),!0===a?n=i:(f&&f.enter(),n=a(i),f&&(f.exit(),o=!0)),n===t.promise?s(ql("Promise-chain cycle")):(r=Jl(n))?cl(r,n,u,s):u(n)):s(i)}catch(t){f&&!o&&f.exit(),s(t)}},tp=function(t,e){t.notified||(t.notified=!0,Sl((function(){for(var n,r=t.reactions;n=r.get();)Zl(n,t);t.notified=!1,e&&!t.rejection&&np(t)})))},ep=function(t,e,n){var r,o;Yl?((r=Wl.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),ol.dispatchEvent(r)):r={promise:e,reason:n},!Hl&&(o=ol["on"+t])?o(r):t===Kl&&jl("Unhandled promise rejection",n)},np=function(t){cl(xl,ol,(function(){var e,n=t.facade,r=t.value;if(rp(t)&&(e=Il((function(){Ll?Bl.emit("unhandledRejection",r,n):ep(Kl,n,r)})),t.rejection=Ll||rp(t)?2:1,e.error))throw e.value}))},rp=function(t){return 1!==t.rejection&&!t.parent},op=function(t){cl(xl,ol,(function(){var e=t.facade;Ll?Bl.emit("rejectionHandled",e):ep("rejectionhandled",e,t.value)}))},ip=function(t,e,n){return function(r){t(e,r,n)}},cp=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,tp(t,!0))},ap=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw ql("Promise can't be resolved itself");var r=Jl(e);r?Sl((function(){var n={done:!1};try{cl(r,e,ip(ap,n,t),ip(cp,n,t))}catch(e){cp(n,e,t)}})):(t.value=e,t.state=1,tp(t,!1))}catch(e){cp({done:!1},e,t)}}};if(Xl&&(Gl=(Dl=function(t){gl(this,Gl),dl(t),cl(Qf,this);var e=Ml(this);try{t(ip(ap,e),ip(cp,e))}catch(t){cp(e,t)}}).prototype,(Qf=function(t){Fl(this,{type:Cl,done:!1,notified:!1,parent:!1,reactions:new Tl,rejection:!1,state:0,value:void 0})}).prototype=sl(Gl,{then:function(t,e){var n=Nl(this),r=zl(wl(this,Dl));return n.parent=!0,r.ok=!vl(t)||t,r.fail=vl(e)&&e,r.domain=Ll?Bl.domain:void 0,0==n.state?n.reactions.add(r):Sl((function(){Zl(r,n)})),r.promise},catch:function(t){return this.then(void 0,t)}}),Jf=function(){var t=new Qf,e=Ml(t);this.promise=t,this.resolve=ip(ap,e),this.reject=ip(cp,e)},El.f=zl=function(t){return t===Dl||t===Zf?new Jf(t):Vl(t)},vl(al)&&Ul!==Object.prototype)){tl=Ul.then,$l||(ul(Ul,"then",(function(t,e){var n=this;return new Dl((function(t,e){cl(tl,n,t,e)})).then(t,e)}),{unsafe:!0}),ul(Ul,"catch",Gl.catch,{unsafe:!0}));try{delete Ul.constructor}catch(t){}fl&&fl(Ul,Gl)}rl({global:!0,wrap:!0,forced:Xl},{Promise:Dl}),ll(Dl,Cl,!1),pl(Cl),Zf=il(Cl),rl({target:Cl,stat:!0,forced:Xl},{reject:function(t){var e=zl(this);return cl(e.reject,void 0,t),e.promise}}),rl({target:Cl,stat:!0,forced:Xl},{resolve:function(t){return Ol(this,t)}}),rl({target:Cl,stat:!0,forced:Ql},{all:function(t){var e=this,n=zl(e),r=n.resolve,o=n.reject,i=Il((function(){var n=dl(e.resolve),i=[],c=0,a=1;ml(t,(function(t){var u=c++,s=!1;a++,cl(n,e,t).then((function(t){s||(s=!0,i[u]=t,--a||r(i))}),o)})),--a||r(i)}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=zl(e),r=n.reject,o=Il((function(){var o=dl(e.resolve);ml(t,(function(t){cl(o,e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var up=Ao,sp=Wu,fp=f,lp=ot,pp=tt,dp=ka,vp=Kf,hp=_r.exports;if(up({target:"Promise",proto:!0,real:!0,forced:!!sp&&fp((function(){sp.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=dp(this,lp("Promise")),n=pp(t);return this.then(n?function(n){return vp(e,t()).then((function(){return n}))}:t,n?function(n){return vp(e,t()).then((function(){throw n}))}:t)}}),pp(sp)){var gp=lp("Promise").prototype.finally;sp.prototype.finally!==gp&&hp(sp.prototype,"finally",gp,{unsafe:!0})}class yp{init(t){return qu(this,void 0,void 0,(function*(){this.client=yield i.default.init(t)}))}get session(){return this.client.session}on(t,e){return this.client.on(t,e),{remove:()=>this.client.off(t,e)}}once(t,e){this.client.once(t,e)}connect(t){return qu(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{this.client.connect(t).then((({uri:t,approval:r})=>{t&&c.default.open(t,(()=>{n(new Error("User cancelled pairing"))})),r().then(e).catch(n).finally((()=>c.default.close()))})).catch(n)}))}))}request(t){return qu(this,void 0,void 0,(function*(){return this.client.request(t)}))}disconnect(t){return qu(this,void 0,void 0,(function*(){return this.client.disconnect(t)}))}}const mp=["near_signAndSendTransaction","near_signAndSendTransactions"],bp=["accountsChanged"],wp=({options:t,store:n,params:r,emitter:o,logger:i})=>qu(void 0,void 0,void 0,(function*(){const c=yield(t=>qu(void 0,void 0,void 0,(function*(){const e=new yp;let n=null;if(yield e.init({projectId:t.projectId,metadata:t.metadata,relayUrl:t.relayUrl}),e.session.length){const t=e.session.keys.length-1;n=e.session.get(e.session.keys[t])}return{client:e,session:n,subscriptions:[]}})))(r),a=()=>{if(r.chainId)return r.chainId;const{networkId:e}=t.network;if(["mainnet","testnet"].includes(e))return`near:${e}`;throw new Error("Invalid chain id")},u=()=>{var t;return((null===(t=c.session)||void 0===t?void 0:t.namespaces.near.accounts)||[]).map((t=>({accountId:t.split(":")[2]})))},s=()=>{c.subscriptions.forEach((t=>t.remove())),c.subscriptions=[],c.session=null},f=()=>qu(void 0,void 0,void 0,(function*(){c.session&&(yield c.client.disconnect({topic:c.session.topic,reason:{code:5900,message:"User disconnected"}})),s()})),l=()=>{c.subscriptions.push(c.client.on("session_update",(t=>{var e;i.log("Session Update",t),t.topic===(null===(e=c.session)||void 0===e?void 0:e.topic)&&(c.session=Object.assign(Object.assign({},c.client.session.get(t.topic)),{namespaces:t.params.namespaces}),o.emit("accountsChanged",{accounts:u()}))}))),c.subscriptions.push(c.client.on("session_delete",(t=>qu(void 0,void 0,void 0,(function*(){var e;i.log("Session Deleted",t),t.topic===(null===(e=c.session)||void 0===e?void 0:e.topic)&&(s(),o.emit("signedOut",null))})))))};return c.session&&l(),{signIn(){return qu(this,void 0,void 0,(function*(){const t=u();if(t.length)return t;try{return c.session=yield c.client.connect({requiredNamespaces:{near:{chains:[a()],methods:mp,events:bp}}}),l(),u()}catch(t){throw yield f(),t}}))},signOut:f,getAccounts(){return qu(this,void 0,void 0,(function*(){return u()}))},signAndSendTransaction({signerId:t,receiverId:r,actions:o}){return qu(this,void 0,void 0,(function*(){i.log("signAndSendTransaction",{signerId:t,receiverId:r,actions:o});const{contract:u}=n.getState();if(!c.session||!u)throw new Error("Wallet not signed in");const s=e.getActiveAccount(n.getState());if(!s)throw new Error("No active account");const f={signerId:t||s.accountId,receiverId:r||u.contractId,actions:o};return c.client.request({topic:c.session.topic,chainId:a(),request:{method:"near_signAndSendTransaction",params:{transaction:f}}})}))},signAndSendTransactions({transactions:t}){return qu(this,void 0,void 0,(function*(){if(i.log("signAndSendTransactions",{transactions:t}),!c.session)throw new Error("Wallet not signed in");return c.client.request({topic:c.session.topic,chainId:a(),request:{method:"near_signAndSendTransactions",params:{transactions:t}}})}))}}}));t.setupWalletConnect=function({projectId:t,metadata:e,chainId:n,relayUrl:r="wss://relay.walletconnect.com",iconUrl:o="./assets/wallet-connect-icon.png"}){return()=>qu(this,void 0,void 0,(function*(){return{id:"wallet-connect",type:"bridge",metadata:{name:"WalletConnect",description:null,iconUrl:o,deprecated:!1,available:!0},init:o=>wp(Object.assign(Object.assign({},o),{params:{projectId:t,metadata:e,relayUrl:r,chainId:n}}))}}))},Object.defineProperty(t,"__esModule",{value:!0})}));